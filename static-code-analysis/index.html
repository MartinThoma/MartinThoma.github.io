<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Martin Thoma" />
        <meta name="copyright" content="Martin Thoma" />
        <link title = "Martin Thoma"
              type  = "application/opensearchdescription+xml"
              rel   = "search"
              href  = "../opensearch.xml">

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="Unit Testing, Flake8, mypy, Security, AppSec, Code, " />

<meta property="og:title" content="Static Code Analysis for Python "/>
<meta property="og:url" content="https://towardsdatascience.com/static-code-analysis-for-python-bdce10b8d287" />
<meta property="og:description" content="Static code analysis looks at the code without executing it. It is usually extremely fast to execute, requires little effort to add to your workflow, and can uncover common mistakes. The only downside is that it is not tailored towards your code. In this article, you will learn how to …" />
<meta property="og:site_name" content="Martin Thoma" />
<meta property="og:article:author" content="Martin Thoma" />
<meta property="og:article:published_time" content="2020-08-17T20:00:00+02:00" />
<meta name="twitter:title" content="Static Code Analysis for Python ">
<meta name="twitter:description" content="Static code analysis looks at the code without executing it. It is usually extremely fast to execute, requires little effort to add to your workflow, and can uncover common mistakes. The only downside is that it is not tailored towards your code. In this article, you will learn how to …">
<meta property="og:image" content="logos/static-code-analysis.png" />
<meta name="twitter:image" content="logos/static-code-analysis.png" >

        <title>Static Code Analysis for Python  · Martin Thoma
</title>
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="../theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="../theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="../theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="../static/print.css" media="print">
        <link rel="stylesheet" type="text/css" href="../static/custom.css" media="screen">

        <!-- MathJax -->
<script type="text/x-mathjax-config">
<!--
MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [ ['$$', '$$'], ['\\[','\\]']],
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
    processEscapes: true
  }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
// -->
</script>
<script type="text/javascript" async
  src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

        <link href="https://martin-thoma.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Martin Thoma - Full Atom Feed" />
        <link href="https://martin-thoma.com/feeds/index.xml" type="application/rss+xml" rel="alternate" title="Martin Thoma - Full RSS Feed" />
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top navbar-default">
            <div class="container">
                <div class="container-fluid">
                    <div class="collapse navbar-collapse">
                        <ul class="nav pull-left top-menu navbar-nav">
                            <li><a href=".." style="font-family: 'Monaco', 'Inconsolata', 'Andale Mono', 'Lucida Console', 'Bitstream Vera Sans Mono', 'Courier New', Courier, Monospace;
                        font-size: 20px;" class="navbar-brand" tabindex="-1">Martin Thoma</a>
                            </li>
                        </ul>
                        <ul class="nav pull-right top-menu navbar-nav">
                            <li ><a href="..">Home</a></li>
                            <li ><a href="../categories.html">Categories</a></li>
                            <li ><a href="../tags.html">Tags</a></li>
                            <li ><a href="../archives.html">Archives</a></li>
                            <li><a href="../support-me/">Support me</a></li>
                            <li><form class="navbar-form" action="../search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="search" class="search-query form-control" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row">
                <div class="col-sm-1 col-md-1"></div>
                <div class="col-sm-10 col-md-10">
<!-- article.html -->
<article>
<div class="row">
    <header class="page-header col-sm-10 col-md-10 col-md-offset-2">
    <h1><a href="https://towardsdatascience.com/static-code-analysis-for-python-bdce10b8d287">Static Code Analysis for Python</a></h1>
    </header>
</div>

<div class="row">
    <div class="col-sm-2 col-md-2 table-of-content">
        <nav>
        <h4>Contents</h4>
        <div id="toc"><ul><li><a class="toc-href" href="#code-complexity" title="Code Complexity">Code Complexity</a></li><li><a class="toc-href" href="#style-guides" title="Style Guides">Style Guides</a></li><li><a class="toc-href" href="#docstrings" title="Docstrings">Docstrings</a></li><li><a class="toc-href" href="#flake8" title="Flake8">Flake8</a></li><li><a class="toc-href" href="#flake8-security-and-bugs" title="Flake8: Security and Bugs">Flake8: Security and Bugs</a></li><li><a class="toc-href" href="#flake8-remove-debugging-artifacts" title="Flake8: Remove Debugging Artifacts">Flake8: Remove Debugging Artifacts</a></li><li><a class="toc-href" href="#let-dead-code-die" title="Let Dead Code Die">Let Dead Code Die</a></li><li><a class="toc-href" href="#flake8-nudging-yourself-to-use-good-style" title="Flake8: Nudging Yourself to use Good Style">Flake8: Nudging Yourself to use Good Style</a></li><li><a class="toc-href" href="#flake8-meta-plugins" title="Flake8 Meta Plugins">Flake8 Meta Plugins</a></li><li><a class="toc-href" href="#type-annotations-and-type-checking" title="Type Annotations and Type Checking">Type Annotations and Type Checking</a></li><li><a class="toc-href" href="#package-structure" title="Package Structure">Package Structure</a></li><li><a class="toc-href" href="#want-to-know-more-about-unit-testing" title="Want to Know More About Unit Testing?">Want to Know More About Unit Testing?</a></li></ul></div>
        </nav>
    </div>
    <div class="col-sm-8 col-md-8 article-content" id="contentAfterTitle">

            
            <p>Static code analysis looks at the code without executing it. It is usually extremely fast to execute, requires little effort to add to your workflow, and can uncover common mistakes. The only downside is that it is not tailored towards your code.</p>
<p>In this article, you will learn how to perform various types of static code analysis in Python. While the article focuses on Python, the types of analysis can be done in any programming language.</p>
<h2 id="code-complexity">Code Complexity</h2>
<p><img alt="Photo by John Barkiple on Unsplash" src="https://cdn-images-1.medium.com/max/10368/0*hpBpO29k15vDdmHJ"/><em>Photo by <a href="https://unsplash.com/@barkiple?utm_source=medium&amp;utm_medium=referral">John Barkiple</a> on <a href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral">Unsplash</a></em></p>
<p>One way to measure code complexity is the <a href="https://en.wikipedia.org/wiki/Cyclomatic_complexity">cyclomatic complexity</a>, also called McCabe complexity as defined in <a href="https://books.google.de/books?id=vtNWAAAAMAAJ&amp;pg=PA3&amp;redir_esc=y">A Complexity Measure</a>:</p>
<div class="math">$$CC = E - N + 2 \cdot P$$</div>
<p>where N is the number of nodes in the control flow graph, E is the number of edges and P is the number of condition-nodes (if-statements, while/for loops).</p>
<p>You can calculate it in Python with <a href="https://pypi.org/project/radon/">radon</a>:</p>
<div class="highlight"><pre><span></span><code>$ pip install radon
$ radon cc mpu/aws.py -s
mpu/aws.py
    F <span class="m">85</span>:0 s3_download - B <span class="o">(</span><span class="m">6</span><span class="o">)</span>
    F <span class="m">16</span>:0 list_files - A <span class="o">(</span><span class="m">3</span><span class="o">)</span>
    F <span class="m">165</span>:0 _s3_path_split - A <span class="o">(</span><span class="m">2</span><span class="o">)</span>
    F <span class="m">46</span>:0 s3_read - A <span class="o">(</span><span class="m">1</span><span class="o">)</span>
    F <span class="m">141</span>:0 s3_upload - A <span class="o">(</span><span class="m">1</span><span class="o">)</span>
    C <span class="m">77</span>:0 ExistsStrategy - A <span class="o">(</span><span class="m">1</span><span class="o">)</span>
</code></pre></div>
<p>The first letter shows the <strong>type of block</strong> (F for function, C for class). Then radon gives the <strong>line number</strong>, the <strong>name</strong> of the class/function, a <strong>grade</strong> (A, B, C, D, E, or F), and the actual <strong>complexity as a number</strong>. Typically, a complexity below 10 is ok. <a href="https://github.com/scipy/scipy/blob/master/scipy/sparse/linalg/eigen/lobpcg/lobpcg.py#L127">The most complex part of scipy</a> has a complexity of 61.</p>
<p>Besides radon, there are various other packages and Flake8 plugins:</p>
<ul>
<li><a href="https://pypi.org/project/flake8-annotations-complexity/">flake8-annotations-complexity</a>: Nudge you to name complex types</li>
<li><a href="https://pypi.org/project/flake8-cognitive-complexity/">flake8-cognitive-complexity</a>: Validates cognitive functions complexity</li>
<li><a href="https://pypi.org/project/flake8-expression-complexity/">flake8-expression-complexity</a>: Make sure that single expressions are not too complicated; similar to cyclomatic complexity for functions / classes.</li>
<li><a href="https://pypi.org/project/flake8-functions/">flake8-functions</a>: Report too long functions and functions with too many arguments</li>
<li><a href="https://pypi.org/project/mccabe/">mccabe</a>: This is used by a couple of other tools and projects</li>
<li><a href="https://pypi.org/project/wily/">wily</a>: A command-line application for tracking, reporting on the complexity of Python tests and applications.</li>
<li><a href="https://pypi.org/project/xenon/">xenon</a>: Relies on radon</li>
</ul>
<h2 id="style-guides">Style Guides</h2>
<p><img alt="Make your code look professional. Photo by Hunters Race on Unsplash" src="https://cdn-images-1.medium.com/max/10132/0*gC2HdhBSJwqGfFAF"/><em>Make your code look professional. Photo by <a href="https://unsplash.com/@huntersrace?utm_source=medium&amp;utm_medium=referral">Hunters Race</a> on <a href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral">Unsplash</a></em></p>
<p>You might have heard the words &ldquo;pythonic code&rdquo;. It means to not only write correct Python code but use the languages features how they are intended to be used (<a href="https://stackoverflow.com/a/25011492/562769">source</a>). It is for sure an opinionated term, but there are a lot of plugins that show you what a large part of the community considers to be pythonic.</p>
<p>Writing code in a similar style to other Python projects is valuable as people will have an easier time reading the code. This is important as we read software more often than we write it (<a href="https://www.goodreads.com/quotes/835238-indeed-the-ratio-of-time-spent-reading-versus-writing-is">source</a>).</p>
<p>So, what is pythonic code?</p>
<p>Let&rsquo;s start with <a href="https://www.python.org/dev/peps/pep-0008/">PEP-8</a>: It&rsquo;s a style guide written and accepted by the Python community in 2001. So it&rsquo;s been around for a while and most people want to follow most of it. The main part which I&rsquo;ve seen most people not to agree with is the <a href="https://www.python.org/dev/peps/pep-0008/#maximum-line-length">maximum line length of 79</a>. I&rsquo;m always recommending to follow this advice in 95% of your codebase. I gave <a href="https://martin-thoma.com/python-style-guide/#maximum-line-length">reasons</a> for that.</p>
<figure class="wp-caption aligncenter img-thumbnail">
<a href="../images/2020/08/black-logo.png"><img alt="Logo of the black project" src="../images/2020/08/black-logo.png" style="width: 512px;"/></a>
<figcaption class="text-center">Logo of the black project. Image source: <a href="https://github.com/psf/black/blob/master/docs/_static/logo2.png">Black Contributors</a></figcaption>
</figure>
<p>For pure code formatting, you should use an auto formatter. I grew into liking <a href="https://pypi.org/project/black/">black</a> because it does NOT allow customization. Code formatted by black always looks the same. As you cannot customize it, you don&rsquo;t need to discuss it. It just solves the issue of conflicting styles and arguments around it. Black is maintained by the Python Software Foundation and likely the most commonly adopted auto formatter for Python.</p>
<p><a href="https://github.com/google/yapf">yapf</a> by Google is another auto formatter.</p>
<h2 id="docstrings">Docstrings</h2>
<p><img alt="Reading the manual can be fun if it&rsquo;s written well. Lasagne and Scipy have pretty good documentation. Photo by Laura Dewilde on Unsplash" src="https://cdn-images-1.medium.com/max/8000/0*Ln2UNS74PuVuhOVM"/><em>Reading the manual can be fun if it&rsquo;s written well. <a href="https://lasagne.readthedocs.io/en/latest/modules/nonlinearities.html#lasagne.nonlinearities.sigmoid">Lasagne</a> and <a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.prewitt.html#scipy.ndimage.prewitt">Scipy</a> have pretty good documentation. Photo by <a href="https://unsplash.com/@lauradewilde97?utm_source=medium&amp;utm_medium=referral">Laura Dewilde</a> on <a href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral">Unsplash</a></em></p>
<p>For docstrings, there is <a href="https://www.python.org/dev/peps/pep-0257/">PEP-257</a>. All of those rules are widely accepted in the community, but they still allow a wide variety of docstrings. There are three commonly used styles:</p>
<ul>
<li><a href="https://numpydoc.readthedocs.io/en/latest/format.html">NumpyDoc-style</a> docstrings: Used by Numpy and Scipy. It&rsquo;s markdown with some specified sections such as <code>Parameters</code> and <code>Returns</code> in a fixed order.</li>
<li><a href="https://github.com/google/styleguide/blob/gh-pages/pyguide.md#38-comments-and-docstrings">Google-style</a> docstrings: A super-slim format which has <code>Args:</code>and <code>Returns:</code>.</li>
<li><a href="https://sphinx-rtd-tutorial.readthedocs.io/en/latest/docstrings.html">Sphinx-style</a> docstrings: A very flexible format that uses restructured text.</li>
</ul>
<p>I love the NumpyDoc format as it is super easy to read even when you just have it inside a text editor. Numpydoc is also well-supported by editors.</p>
<p>Here you can see the three in comparison:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_meta_numpydoc</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">a_number</span><span class="p">,</span> <span class="n">a_dict</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Get meta-information of an image.</span>

<span class="sd">    Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</span>
<span class="sd">    Aenean commodo</span>
<span class="sd">    ligula eget dolor. Aenean massa. Cum sociis natoque penatibus</span>
<span class="sd">    et magnis dis</span>
<span class="sd">    parturient montes, nascetur ridiculus mus.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    filepath : str</span>
<span class="sd">        Get metadata from this file</span>
<span class="sd">    a_number : int</span>
<span class="sd">        Some more details</span>
<span class="sd">    a_dict : dict</span>
<span class="sd">        Configuration</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    meta : dict</span>
<span class="sd">        Extracted meta information</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    IOError</span>
<span class="sd">        File could not be read</span>
<span class="sd">    """</span>


<span class="k">def</span> <span class="nf">get_meta_google_doc</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">a_number</span><span class="p">,</span> <span class="n">a_dict</span><span class="p">):</span>
    <span class="sd">"""Get meta-information of an image.</span>

<span class="sd">    Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</span>
<span class="sd">    Aenean commodo</span>
<span class="sd">    ligula eget dolor. Aenean massa. Cum sociis natoque penatibus</span>
<span class="sd">    et magnis dis</span>
<span class="sd">    parturient montes, nascetur ridiculus mus.</span>

<span class="sd">    Args:</span>
<span class="sd">        filepath: Get metadata from this file.</span>
<span class="sd">        a_number: Some more details.</span>
<span class="sd">        a_dict: Configuration.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Extracted meta information:</span>

<span class="sd">    Raises:</span>
<span class="sd">        IOError: File could not be read.</span>
<span class="sd">    """</span>


<span class="k">def</span> <span class="nf">get_meta_sphinx_doc</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">a_number</span><span class="p">,</span> <span class="n">a_dict</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Get meta-information of an image.</span>

<span class="sd">    Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</span>
<span class="sd">    Aenean commodo</span>
<span class="sd">    ligula eget dolor. Aenean massa. Cum sociis natoque penatibus</span>
<span class="sd">    et magnis dis</span>
<span class="sd">    parturient montes, nascetur ridiculus mus.</span>

<span class="sd">    :param filepath: Get metadata from this file</span>
<span class="sd">    :type filepath: str</span>
<span class="sd">    :param a_number: Some more details</span>
<span class="sd">    :type a_number: int</span>
<span class="sd">    :param a_dict: Configuration</span>
<span class="sd">    :type a_dict: dict</span>

<span class="sd">    :returns: dict -- Extracted meta information</span>

<span class="sd">    :raises: IOError</span>
<span class="sd">    """</span>
</code></pre></div>
<h2 id="flake8">Flake8</h2>
<p><a href="https://medium.com/dailyjs/why-you-should-always-use-a-linter-and-or-pretty-formatter-bb5471115a76">You should always use a linter</a>, as <a href="undefined">Alberto Gimeno</a> pointed out. They can check your style, but more importantly, show potential errors.</p>
<p><a href="https://pypi.org/project/flake8/">Flake8</a> is a wrapper around PyFlakes, pycodestyle, and a McCabe script. It is the most commonly used tool for linting in Python. Flake8 is awesome because there are so many plugins for it. I found 223 packages with the string &ldquo;flake8&rdquo; within the name and looked at many of them. I&rsquo;ve also looked at packages with the trove classifier Framework :: Flake8 and found 143 packages of which 122 started with flake8- . Only 21 packages had the Flake8 Framework trove classifier but didn&rsquo;t start with flake8- and only two of them looked interesting.</p>
<blockquote>
<p><strong>Side note</strong>: Typo squatting is an issue every open package repository has to fight with (Bachelor&rsquo;s Thesis: <a href="https://incolumitas.com/data/thesis.pdf">Typosquatting in Programming Language Package Managers</a> which has a <a href="https://incolumitas.com/2016/06/08/typosquatting-package-managers/">blog post</a> and an <a href="https://arxiv.org/pdf/2003.03471.pdf">interesting follow-up</a>, Bachelor&rsquo;s Thesis: <a href="https://is.muni.cz/th/y41ft/thesis_final_electronic.pdf">Attacks on Package Managers</a>). There are examples in Python for it causing harm (<a href="https://mail.python.org/pipermail/security-announce/2017-September/000000.html">2017</a>, <a href="https://www.bleepingcomputer.com/news/security/ten-malicious-libraries-found-on-pypi-python-package-index/">2017</a>, <a href="https://nakedsecurity.sophos.com/2017/09/19/pypi-python-repository-hit-by-typosquatting-sneak-attack/">2017</a>, <a href="https://www.trustwave.com/en-us/resources/blogs/spiderlabs-blog/typosquatting-in-python-repositories/">2019</a>, <a href="https://snyk.io/blog/malicious-packages-found-to-be-typo-squatting-in-pypi/">2019</a>, <a href="https://sysdig.com/blog/malicious-python-libraries-jeilyfish-dateutil/">2019</a>). There is <a href="https://github.com/jspeed-meyers/pypi-scan">pypi-scan</a> for finding examples and <a href="https://pypi.org/project/pypi-parker/">pypi-parker</a> to prevent common typos to be used. <a href="undefined">William Bengtsson</a> also did something similar to harden the Python community against this thread. See his article below for more information about his project. Package parkinginflates the number of packages on PyPI and I filtered them by looking for the summary &ldquo;A package to prevent exploit&rdquo;.
<a href="https://medium.com/@williambengtson/python-typosquatting-for-fun-not-profit-99869579c35d"><strong>Python Typosquatting for Fun not Profit</strong>
<em>by William Bengtson | @__muscles</em>medium.com</a></p>
</blockquote>
<p>Here are some of the interesting flake8 plugins:</p>
<ul>
<li>
<p><a href="https://github.com/mschwager/cohesion">cohesion</a>: Check if class cohesion is below a threshold. This indicates that functionality should be split out of a class.</p>
</li>
<li>
<p><a href="https://pypi.org/project/flake8-assert-msg/">flake8-assert-msg</a>: Make sure assert statements have messages</p>
</li>
<li><a href="https://pypi.org/project/flake8-blind-except/">flake8-blind-except</a>: Prevent Pokemon exception catching</li>
<li><a href="https://pypi.org/project/flake8-builtins/">flake8-builtins</a>: Check for python builtins being used as variables or parameters.</li>
<li><a href="https://pypi.org/project/flake8-docstrings/">flake8-docstrings</a>: Adds pydocstyle support</li>
<li><a href="https://pypi.org/project/flake8-isort/">flake8-isort</a>: Use <a href="https://pypi.python.org/pypi/isort">isort</a> to check if the imports on your python files are sorted the way you expect</li>
<li><a href="https://github.com/globality-corp/flake8-logging-format">flake8-logging-format</a>: Validate (lack of) logging format strings</li>
<li><a href="https://pypi.org/project/flake8-pytest-style/">flake8-pytest-style</a>: Checking common style issues or inconsistencies with pytest-based tests</li>
<li><a href="https://pypi.org/project/flake8-requirements/">flake8-requirements</a>: Checks/validates package import requirements. It reports missing and/or not used project direct dependencies</li>
<li><a href="https://pypi.org/project/flake8-graphql/">flake8-graphql</a>: Lint GraphQL query strings</li>
<li><a href="https://pypi.org/project/flake8_implicit_str_concat/">flake8_implicit_str_concat</a>: Goes well with black 🎉</li>
<li><a href="https://pypi.org/project/flake8-mock/">flake8-mock</a>: Check for mistakes using mocks</li>
<li><a href="https://pypi.org/project/flake8-nb/">flake8-nb</a>: Check jupyter notebooks</li>
<li><a href="https://pypi.org/project/flake8-pyi/">flake8-pyi</a>: Lint stub files</li>
<li><a href="https://pypi.org/project/flake8-variables-names/">flake8-variables-names</a>: Find common &ldquo;meaningless&rdquo; variable names</li>
<li><a href="https://pypi.org/project/pep8-naming/">pep8-naming</a>: Check your code against PEP 8 naming conventions</li>
<li><a href="https://pypi.org/project/pandas-vet/">pandas-vet</a>: Opinionated linting for Pandas code</li>
<li><a href="https://pypi.org/project/wemake-python-styleguide/">wemake-python-styleguide</a>: An opinionated style guide/checker which seems to be pretty popular. I haven&rsquo;t seen that one before, though.</li>
</ul>
<p>An alternative to parts of Flake8 <a href="https://pypi.org/project/prospector/">prospector</a>. It couples tools, but it is way less commonly used and thus not as flexible as Flake8.</p>
<h2 id="flake8-security-and-bugs">Flake8: Security and Bugs</h2>
<p><img alt="Be safe by looking at warning signs. Photo by Troy Bridges on Unsplash" src="https://cdn-images-1.medium.com/max/8064/0*F1jS0N6EjU66u4nu"/><em>Be safe by looking at warning signs. Photo by <a href="https://unsplash.com/@esptroy?utm_source=medium&amp;utm_medium=referral">Troy Bridges</a> on <a href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral">Unsplash</a></em></p>
<ul>
<li><a href="https://pypi.org/project/flake8-bandit/">flake8-bandit</a>: Security Testing</li>
<li><a href="https://pypi.org/project/flake8-bugbear/">flake8-bugbear</a>: finding likely bugs and design problems in your program &mdash; usually it&rsquo;s silent, but when it&rsquo;s not you should have a look 🐻</li>
<li><a href="https://pypi.org/project/flake8-requests/">flake8-requests</a>: checks usage of the request framework</li>
</ul>
<h2 id="flake8-remove-debugging-artifacts">Flake8: Remove Debugging Artifacts</h2>
<p>It happened quite a couple of times to me: I&rsquo;ve added some code while developing a new feature or debugging an old one and forgot to remove it afterward. It was most often caught by the reviewer, but it is not necessary to distract the reviewer with this.</p>
<p><a href="https://pypi.org/project/flake8-breakpoint/">flake8-breakpoint</a> checks for forgotten breakpoints and <a href="https://pypi.org/project/flake8-print/">flake8-print</a> will complain about every print statement. <a href="https://pypi.org/project/flake8-debugger/">flake8-debugger</a>, <a href="https://pypi.org/project/flake8-fixme/">flake8-fixme</a>, <a href="https://pypi.org/project/flake8-todo/">flake8-todo</a> go in the same direction.</p>
<h2 id="let-dead-code-die">Let Dead Code Die</h2>
<p><img alt="Photo by Kenny Orr on Unsplash" src="https://cdn-images-1.medium.com/max/11520/0*HolQng-8Fkoy-A63"/><em>Photo by <a href="https://unsplash.com/@greyharpoon?utm_source=medium&amp;utm_medium=referral">Kenny Orr</a> on <a href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral">Unsplash</a></em></p>
<p>Who hasn&rsquo;t done it: You removed a functionality, but the code could be handy. So you comment it out. Or you add a if False block around it. Sometimes more sophisticated by adding a configuration option you don&rsquo;t need.</p>
<p>The clean solution is to have a single, clear commit that removes that feature. Maybe add a git tag so that you can find it later if you want to add it again.</p>
<p>And then there is code which is dead, but you forgot about it. Luckily, you can automatically detect it:</p>
<ul>
<li><a href="https://pypi.org/project/flake8-eradicate/">flake8-eradicate</a>: Find commented out (or so-called &ldquo;dead&rdquo;) code.</li>
<li><a href="https://pypi.org/project/vulture/">vulture</a>: Finds unused code in Python programs</li>
</ul>
<h2 id="flake8-nudging-yourself-to-use-good-style">Flake8: Nudging Yourself to use Good Style</h2>
<p><img alt="Having an experienced developer review your code is awesome. In the best case, you will learn something new that you can apply in all further projects. And some plugins act like that. Photo by Brooke Cagle on Unsplash" src="https://cdn-images-1.medium.com/max/9446/0*lXvALfnWfaU_cFB_"/><em>Having an experienced developer review your code is awesome. In the best case, you will learn something new that you can apply in all further projects. And some plugins act like that. Photo by <a href="https://unsplash.com/@brookecagle?utm_source=medium&amp;utm_medium=referral">Brooke Cagle</a> on <a href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral">Unsplash</a></em></p>
<p>Some plugins helped me to learn something about Python. For example, the following helped me to get rid of small little bugs and inconsistencies:</p>
<ul>
<li><a href="https://pypi.org/project/flake8-comprehensions/">flake8-comprehensions</a>: Helps you write better list/set/dict comprehensions &mdash; I love this one 😍</li>
<li><a href="https://pypi.org/project/flake8-executable/">flake8-executable</a>: Check executable permissions and <a href="https://en.wikipedia.org/wiki/Shebang_(Unix)">shebangs</a>. Files should either executable and have a shebang, or not be executable and not have a shebang.</li>
<li><a href="https://pypi.org/project/flake8-raise/">flake8-raise</a>: Finds improvements for raise statements</li>
<li><a href="https://pypi.org/project/flake8-pytest/">flake8-pytest</a>: Use assert instead of assertEqual</li>
</ul>
<p>The following new style nudging plugins aim to push you to use modern style Python:</p>
<ul>
<li><a href="https://pypi.org/project/flake8-pathlib/">flake8-pathlib</a>: <a href="https://docs.python.org/3.4/library/pathlib.html">Pathlib</a> was added in Python 3.4 and I&rsquo;m still not quite used to it. This plugin might nudge me to use it when it&rsquo;s appropriate.</li>
<li><a href="https://pypi.org/project/flake8-string-format/">flake8-string-format</a>, <a href="https://pypi.org/project/flake8-printf-formatting/">flake8-printf-formatting</a>, <a href="https://pypi.org/project/flake8-sfs/">flake8-sts</a>: String formatting.</li>
</ul>
<p>This is one of the most valuable categories for me. If you know more plugins which help to use new styles, let me know 😃</p>
<h2 id="flake8-meta-plugins">Flake8 Meta Plugins</h2>
<p><img alt="Image created by Martin Thoma via imgflip.com" src="https://cdn-images-1.medium.com/max/2400/1*E4HyDr73N_j4p3mn5X64pA.jpeg"/><em>Image created by Martin Thoma via imgflip.com</em></p>
<p>Flake8 has some plugins which don&rsquo;t add more linting functionality, but improve flake8 in another way:</p>
<ul>
<li><a href="https://pypi.org/project/flake8-colors/">flake8&ndash;colors</a>: ANSI colors highlight for Flake8</li>
<li><a href="https://pypi.org/project/flake8-csv/">flake8-csv</a>: Generate error reports in CSV format</li>
<li><a href="https://pypi.org/project/flake8-json/">flake8-json</a>: Generate error reports in JSON format</li>
<li><a href="https://pypi.org/project/flake8-dashboard/">flake8-dashboard</a> and <a href="https://pypi.org/project/flake8-html/">flake8-html</a>: Generate an HTML report (<a href="https://aperezhortal.github.io/flake8-dashboard/example_dashboard/index.html">dashboard demo</a>)</li>
<li><a href="https://pypi.org/project/flake8-immediate/">flake8-immediate</a>: Prints the errors directly without any delay</li>
<li><a href="https://pypi.org/project/flake8-strftime/">flake8-strftime</a>: Checks for use of platform-specific strftime codes</li>
<li><a href="https://pypi.org/project/flake8-SQL/">flake8-SQL</a> and <a href="http://py-find-injection">py-find-injection</a>: Looks for SQL queries and checks them against an opinionated style</li>
<li><a href="https://pypi.org/project/flake8-tuple/">flake8-tuple</a>: Checks for (probably) unintended one element tuples</li>
</ul>
<p>And some plugins people might need for legal reasons like flake8-author, flake8-copyright, and flake8-license.</p>
<blockquote>
<p>To Flake8 plugin authors: Please make sure that you list the error codes your plugin introduces and that you give at least some examples of what your plugin considers bad / good.</p>
</blockquote>
<h2 id="type-annotations-and-type-checking">Type Annotations and Type Checking</h2>
<p><img alt="The mypy plugin for VS Code showing an issue with the types. Screenshot by Martin Thoma." src="https://cdn-images-1.medium.com/max/3442/1*jXmhQQBv0xgpPQPUN08Z_A.png"/><em>The mypy plugin for VS Code showing an issue with the types. Screenshot by Martin Thoma.</em></p>
<p>It&rsquo;s possible in Python, but you need to do it. It&rsquo;s not done automatically. I&rsquo;ve written a longer article about how <a href="https://medium.com/analytics-vidhya/type-annotations-in-python-3-8-3b401384403d">type annotations work in Python</a>. There are multiple tools you can use, but I recommend mypy. You can run it via pytest by using pytest-mypy or via flake8 by using flake8-mypy , but I prefer to run it separately. The main reason for it is that the output given by <a href="https://levelup.gitconnected.com/ci-pipelines-for-python-projects-9ac2830d2e38">CI pipelines</a> is cleaner.</p>
<p>You can integrate type checking (e.g. via mypy) into your editor, but the type annotations alone already go a long way as they document what is expected.</p>
<h2 id="package-structure">Package Structure</h2>
<p><img alt="Check that your package looks fine before shipping it. Photo by Toby Stodart on Unsplash" src="https://cdn-images-1.medium.com/max/10080/0*y67weckARV-M_yOh"/><em>Check that your package looks fine before shipping it. Photo by <a href="https://unsplash.com/@tobystodart?utm_source=medium&amp;utm_medium=referral">Toby Stodart</a> on <a href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral">Unsplash</a></em></p>
<p><a href="https://github.com/regebro/pyroma">pyroma</a> rates how well a Python project complies with the best practices of the Python packaging ecosystem.</p>
<p>Here are some examples of my projects:</p>
<div class="highlight"><pre><span></span><code>$ pyroma mpu
------------------------------
Checking mpu
Found mpu
------------------------------
Final rating: <span class="m">10</span>/10
Your cheese is so fresh most pe

$ pyroma nox
------------------------------
Checking nox
Found nox
------------------------------
Your long_description is not valid ReST:
&lt;string&gt;:2: <span class="o">(</span>WARNING/2<span class="o">)</span> Explicit markup ends without a blank line<span class="p">;</span> unexpected unindent.
&lt;string&gt;:3: <span class="o">(</span>WARNING/2<span class="o">)</span> Field list ends without a blank line<span class="p">;</span> unexpected unindent.
&lt;string&gt;:4: <span class="o">(</span>WARNING/2<span class="o">)</span> Explicit markup ends without a blank line<span class="p">;</span> unexpected unindent.
------------------------------
Final rating: <span class="m">9</span>/10
Cottage Cheese
------------------------------
</code></pre></div>
<h2 id="want-to-know-more-about-unit-testing">Want to Know More About Unit Testing?</h2>
<p>In this series, we already had:</p>
<ul>
<li>Part 1: <a href="https://medium.com/swlh/unit-testing-in-python-basics-21a9a57418a0">The basics of Unit Testing in Python</a></li>
<li>Part 2: <a href="https://levelup.gitconnected.com/unit-testing-in-python-mocking-patching-and-dependency-injection-301280db2fed">Patching, Mocks, and Dependency Injection</a></li>
<li>Part 3: <a href="https://medium.com/analytics-vidhya/how-to-test-flask-applications-aef12ae5181c">How to test Flask applications</a> with Databases, Templates and Protected Pages</li>
<li>Part 4: <a href="https://medium.com/python-in-plain-english/unit-testing-in-python-tox-and-nox-833e4bbce729">tox and nox</a></li>
<li>Part 5: <a href="https://towardsdatascience.com/unit-testing-in-python-structure-57acd51da923">Structuring Unit Tests</a></li>
<li>Part 6: <a href="https://towardsdatascience.com/ci-pipelines-for-python-projects-9ac2830d2e38">CI-Pipelines</a></li>
<li>Part 7: <a href="https://towardsdatascience.com/unit-testing-in-python-property-based-testing-892a741fc119">Property-based Testing</a></li>
<li>Part 8: <a href="https://medium.com/analytics-vidhya/unit-testing-in-python-mutation-testing-7a70143180d8">Mutation Testing</a></li>
<li>Part 9: Static Code Analysis: Linters, Type Checking, and Code Complexity</li>
</ul>
<p>Let me know if you&rsquo;re interested in other topics around testing with Python or professional software development with Python: info@martin-thoma.de</p>
            
            <div id="disqus_thread" class="no-print"></div>
<script>
    /*
    var disqus_config = function () {
        this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() {  // REQUIRED CONFIGURATION VARIABLE: EDIT THE SHORTNAME BELOW
        var d = document, s = d.createElement('script');

        s.src = '//martinthoma.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

            <hr/>
        </div>
        <section>
        <div class="col-sm-2 col-md-2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2020-08-17T20:00:00+02:00">Aug 17, 2020</time>
            <br/>
            by <a rel="author" class="vcard author post-author" itemprop="author" href="../author/martin-thoma/"><span class="fn" itemscope="" itemtype="https://schema.org/Person"><span itemprop="name">Martin Thoma</span></span></a>
            <h4>Category</h4>
            <a class="category-link" href="../categories.html#code-ref">Code</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="../tags.html#appsec-ref">AppSec
                    <span>9</span>
</a></li>
                <li><a href="../tags.html#flake8-ref">Flake8
                    <span>3</span>
</a></li>
                <li><a href="../tags.html#mypy-ref">mypy
                    <span>3</span>
</a></li>
                <li><a href="../tags.html#security-ref">Security
                    <span>14</span>
</a></li>
                <li><a href="../tags.html#unit-testing-ref">Unit Testing
                    <span>5</span>
</a></li>
            </ul>
<h4>Contact</h4>
    <a href="https://twitter.com/_martinthoma" title="My Twitter Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-twitter sidebar-social-links"></i></a>
    <a href="mailto:info@martin-thoma.de" title="My Email Address" class="sidebar-social-links" target="_blank">
    <i class="fa fa-envelope sidebar-social-links"></i></a>
    <a href="https://github.com/MartinThoma" title="My Github Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-github sidebar-social-links"></i></a>
    <a href="http://stackoverflow.com/users/562769/martin-thoma" title="My Stackoverflow Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-stackoverflow sidebar-social-links"></i></a>
        </div>
        </section>
</div>
</article>
                </div>
                <div class="col-sm-1 col-md-1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
<footer class="no-print">
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-subtitle"><span class="site-name">Martin Thoma</span> - A blog about Code, the Web and Cyberculture</li>
        <li><a href="https://martin-thoma.com/feeds/index.xml">RSS-Feed</a></li>
        <li><a href="http://www.martin-thoma.de/privacy.htm">Datenschutzerkl&auml;rung</a></li>
        <li><a href="http://www.martin-thoma.de/impressum.htm">Impressum</a></li>
        <li class="elegant-power">Powered by
            <a href="https://blog.getpelican.com/" title="Pelican Home Page" tabindex="-1">Pelican</a>.
            Theme: <a href="https://elegant.oncrashreboot.com" title="Theme Elegant Home Page" tabindex="-1">Elegant</a>
            by <a href="https://www.oncrashreboot.com/" title="Talha Mansoor Home Page" tabindex="-1">Talha Mansoor</a></li>
    </ul>
</div>
</footer>        <script src="//code.jquery.com/jquery.min.js"></script>
        <!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>
        <script>
(function(){
    'use strict';

    /*
    Create intra-page links
    Requires that your headings already have an `id` attribute set
    For every heading in your page, this adds a little anchor link `#` that you can click to get a permalink to the heading.
    Ignores `h1`, because you should only have one per page.
    The text content of the tag is used to generate the link, so it will fail "gracefully-ish" if you have duplicate heading text.

    Credit: https://gist.github.com/SimplGy/a229d25cdb19d7f21231
     */

    var headingNodes = [], results, link,
        tags = ['h2', 'h3', 'h4', 'h5', 'h6'];

    tags.forEach(function(tag){
        var contentTag = document.getElementById('contentAfterTitle');
      results = contentTag.getElementsByTagName(tag);
      Array.prototype.push.apply(headingNodes, results);
    });

    headingNodes.forEach(function(node){
      link = document.createElement('a');
      link.className = 'deepLink';
      link.textContent = ' ¶';
      link.href = '#' + node.getAttribute('id');
      node.appendChild(link);
    });

  })();
</script>
    </body>
    <!-- Theme: Elegant built for Pelican
    License : https://elegant.oncrashreboot.com -->
</html>