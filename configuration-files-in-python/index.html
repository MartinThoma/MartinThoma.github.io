<!doctype html>
<html lang="en">
  <!-- type: head.html -->
  <head>
    <meta charset="utf-8">
    
    

    
        <meta name="thumbnail" content="//martin-thoma.com/images/logos/python.png" />
        <meta property="og:image" content="//martin-thoma.com/images/logos/python.png" />
    

    <meta property="og:type" content="blog"/>

    <title>Configuration files in Python</title>
    <link rel="stylesheet" href="//martin-thoma.com/css/screen.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="//martin-thoma.com/css/style.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="//martin-thoma.com/css/pygments.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="//martin-thoma.com/css/tocplus-screen.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="//martin-thoma.com/css/print.css" type="text/css" media="print" />
    <link rel="stylesheet" href="//martin-thoma.com/css/handheld.css" type="text/css" media="only screen and (max-device-width: 480px)" />

    <link rel="alternate" type="application/rss+xml" title="Martin Thoma RSS Feed" href="//martin-thoma.com/feed/" /><!--TODO-->
    <link rel="shortcut icon" href="//martin-thoma.com/favicon.ico" type="image/x-icon" />

    <link rel="canonical" href="//martin-thoma.com/configuration-files-in-python" />
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Configuration files in Python"
        ,"datePublished": "2014-07-27T15:46:00+02:00"
        
      }
    </script>
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:site" content="@themoosemind"/>
<meta name="twitter:creator" content="@themoosemind"/>
<meta name="twitter:title" content="Configuration files in Python"/>

    <meta name="twitter:description" content="A blog about Code, the Web and Cyberculture" />


    <meta name="twitter:image" content="//martin-thoma.com/images/logos/python.png"/>



<meta name="twitter:url" content="//martin-thoma.com/configuration-files-in-python"/>
<meta name="twitter:domain" content="Martin Thoma.com"/>


    <script type='text/javascript' src="//martin-thoma.com/js/jquery.js"></script>
    <script type='text/javascript' src="//martin-thoma.com/js/jquery-migrate.min.js"></script>
    <style type="text/css">div#toc_container {width: 275px;}</style>
    <style type="text/css" id="syntaxhighlighteranchor"></style>

<!-- MathJax -->
<script type="text/x-mathjax-config">
<!--
MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [ ['$$', '$$'], ['\\[','\\]']],
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
    processEscapes: true
  }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
// -->
</script>
<script type="text/javascript" async
  src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<!-- Latest compiled and minified CSS bootstrap -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
</head>

<!-- type: post.html -->
<body>
    <div id="wrapper">
        <div id="container" class="container">
            <div class="span-16">
                <!-- type: header.html -->
<div id="header" role="banner">
    <h1><a href="//martin-thoma.com">Martin Thoma</a></h1>
    <h2 style="margin-top: 0;">A blog about Code, the Web and Cyberculture.</h2>
</div>
<nav class="navcontainer" role="navigation">
    <ul id="nav">
        <li class=""><a href="//martin-thoma.com">Home</a></li>
        <li class="page_item page-item-41 "><a href="//martin-thoma.com/author/martin-thoma/">About Me</a></li>
        <li class="page_item page-item-91 "><a href="//martin-thoma.com/imprint/">Imprint</a></li>
    </ul>
</nav>

                <div id="content">
                    <article class="post type-post format-standard hentry clearfix ">
                        <h2 class="title entry-title">Configuration files in Python</h2>
                        <div class="postdate entry-date">
                            <time datetime="2014-07-27T15:46:00+02:00">
                                July
                                27th,
                                  
                                2014
                            </time>
                        </div>

                        <div class="entry" id="contentAfterTitle">
                            <p>Most interesting programs need some kind of configuration:</p>

<ul>
  <li>Content Management Systems like WordPress blogs, WikiMedia and Joomla need
to store the information where the database server is (the hostname) and
how to login (username and password)</li>
  <li>Proprietary software might need to store if the software was registered already
(the serial key)</li>
  <li>Scientific software could store the path to BLAS libraries</li>
</ul>

<p>For very simple tasks you might choose to write these configuration variables
directly into the source code. But this is a bad idea when you upload the code
to GitHub.</p>

<p>I will explain some alternatives I got to know for Python.</p>

<div id="toc_container" class="toc_light_blue no_bullets">
   <p class="toc_title">Contents</p>
   <ul class="toc_list">
      <li class="toc_level-1 toc_section-1">
         <a href="#tocAnchor-1-1"><span class="tocnumber">1</span> <span class="toctext">Python Configuration File</span></a>
      </li>
      <li class="toc_level-1 toc_section-2">
         <a href="#tocAnchor-1-2"><span class="tocnumber">2</span> <span class="toctext">JSON</span></a>
      </li>
      <li class="toc_level-1 toc_section-3">
         <a href="#tocAnchor-1-3"><span class="tocnumber">3</span> <span class="toctext">YAML</span></a>
      </li>
      <li class="toc_level-1 toc_section-4">
         <a href="#tocAnchor-1-4"><span class="tocnumber">4</span> <span class="toctext">INI</span></a>
         <ul>
            <li class="toc_level-2 toc_section-5">
               <a href="#tocAnchor-1-4-1"><span class="tocnumber">4.1</span> <span class="toctext">ConfigParser</span></a>
            </li>
         </ul>
      </li>
      <li class="toc_level-1 toc_section-6">
         <a href="#tocAnchor-1-6"><span class="tocnumber">5</span> <span class="toctext">XML</span></a>
      </li>
      <li class="toc_level-1 toc_section-7">
         <a href="#tocAnchor-1-7"><span class="tocnumber">6</span> <span class="toctext">File Endings</span></a>
      </li>
      <li class="toc_level-1 toc_section-8">
         <a href="#tocAnchor-1-8"><span class="tocnumber">7</span> <span class="toctext">Resources</span></a>
      </li>
   </ul>
</div><h2 id="tocAnchor-1-1">Python Configuration File</h2>

<p>The simplest way to write configuration files is to simply write a separate file
that contains Python code. You might want to call it something like
<code>databaseconfig.py</code>. Then you could add the line <code>*config.py</code> to your
<code>.gitignore</code> file to avoid uploading it accidentally.</p>

<p>A configuration file could look like this:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#777">#!/usr/bin/env python</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">preprocessing</span>
mysql = {<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">host</span><span style="color:#710">'</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">localhost</span><span style="color:#710">'</span></span>,
         <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">user</span><span style="color:#710">'</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">root</span><span style="color:#710">'</span></span>,
         <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">passwd</span><span style="color:#710">'</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">my secret password</span><span style="color:#710">'</span></span>,
         <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">db</span><span style="color:#710">'</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">write-math</span><span style="color:#710">'</span></span>}
preprocessing_queue = [preprocessing.scale_and_center,
                       preprocessing.dot_reduction,
                       preprocessing.connect_lines]
use_anonymous = <span style="color:#069">True</span>
</pre></div>
</div>
</div>

<p>Within the actual code, you can use it like this:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#777">#!/usr/bin/env python</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">databaseconfig</span> <span style="color:#080;font-weight:bold">as</span> cfg
connect(mysql[<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">host</span><span style="color:#710">'</span></span>], mysql[<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">user</span><span style="color:#710">'</span></span>], mysql[<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">password</span><span style="color:#710">'</span></span>])
</pre></div>
</div>
</div>

<p>The way you include the configuration might feel very convenient at a first
glance, but imagine what happens when you get more configuration variables.
You definitely need to provide an example configuration file. And it is hard
to resist the temptation to include code within the configuration file.</p>

<h2 id="tocAnchor-1-2">JSON</h2>

<p><a href="https://en.wikipedia.org/wiki/JSON">JSON</a> is short for JavaScript Object
Notation. It is widespread and thus has good support for many programming
languages.</p>

<p>The configuration might look like this:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>{
    <span style="color:#606"><span style="color:#404">"</span><span>mysql</span><span style="color:#404">"</span></span>:{
        <span style="color:#606"><span style="color:#404">"</span><span>host</span><span style="color:#404">"</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">localhost</span><span style="color:#710">"</span></span>,
        <span style="color:#606"><span style="color:#404">"</span><span>user</span><span style="color:#404">"</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">root</span><span style="color:#710">"</span></span>,
        <span style="color:#606"><span style="color:#404">"</span><span>passwd</span><span style="color:#404">"</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">my secret password</span><span style="color:#710">"</span></span>,
        <span style="color:#606"><span style="color:#404">"</span><span>db</span><span style="color:#404">"</span></span>:<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">write-math</span><span style="color:#710">"</span></span>
    },
    <span style="color:#606"><span style="color:#404">"</span><span>other</span><span style="color:#404">"</span></span>:{
        <span style="color:#606"><span style="color:#404">"</span><span>preprocessing_queue</span><span style="color:#404">"</span></span>:[
            <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">preprocessing.scale_and_center</span><span style="color:#710">"</span></span>,
            <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">preprocessing.dot_reduction</span><span style="color:#710">"</span></span>,
            <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">preprocessing.connect_lines</span><span style="color:#710">"</span></span>
            ],
        <span style="color:#606"><span style="color:#404">"</span><span>use_anonymous</span><span style="color:#404">"</span></span>:<span style="color:#088">true</span>
    }
}
</pre></div>
</div>
</div>

<p>You can read it like this:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">json</span>

<span style="color:#080;font-weight:bold">with</span> <span style="color:#369;font-weight:bold">open</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">config.json</span><span style="color:#710">'</span></span>) <span style="color:#080;font-weight:bold">as</span> json_data_file:
    data = json.load(json_data_file)
print(data)
</pre></div>
</div>
</div>

<p>which outputs</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>{<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#E40">u</span><span style="color:#710">'</span><span style="color:#D20">mysql</span><span style="color:#710">'</span></span>: {<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#E40">u</span><span style="color:#710">'</span><span style="color:#D20">db</span><span style="color:#710">'</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#E40">u</span><span style="color:#710">'</span><span style="color:#D20">write-math</span><span style="color:#710">'</span></span>,
            <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#E40">u</span><span style="color:#710">'</span><span style="color:#D20">host</span><span style="color:#710">'</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#E40">u</span><span style="color:#710">'</span><span style="color:#D20">localhost</span><span style="color:#710">'</span></span>,
            <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#E40">u</span><span style="color:#710">'</span><span style="color:#D20">passwd</span><span style="color:#710">'</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#E40">u</span><span style="color:#710">'</span><span style="color:#D20">my secret password</span><span style="color:#710">'</span></span>,
            <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#E40">u</span><span style="color:#710">'</span><span style="color:#D20">user</span><span style="color:#710">'</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#E40">u</span><span style="color:#710">'</span><span style="color:#D20">root</span><span style="color:#710">'</span></span>},
 <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#E40">u</span><span style="color:#710">'</span><span style="color:#D20">other</span><span style="color:#710">'</span></span>: {<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#E40">u</span><span style="color:#710">'</span><span style="color:#D20">preprocessing_queue</span><span style="color:#710">'</span></span>: [<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#E40">u</span><span style="color:#710">'</span><span style="color:#D20">preprocessing.scale_and_center</span><span style="color:#710">'</span></span>,
                                     <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#E40">u</span><span style="color:#710">'</span><span style="color:#D20">preprocessing.dot_reduction</span><span style="color:#710">'</span></span>,
                                     <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#E40">u</span><span style="color:#710">'</span><span style="color:#D20">preprocessing.connect_lines</span><span style="color:#710">'</span></span>],
            <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#E40">u</span><span style="color:#710">'</span><span style="color:#D20">use_anonymous</span><span style="color:#710">'</span></span>: <span style="color:#069">True</span>}}
</pre></div>
</div>
</div>

<p>Writing JSON files is also easy. Just build up the dictionary and use</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">json</span>
<span style="color:#080;font-weight:bold">with</span> <span style="color:#369;font-weight:bold">open</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">config.json</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">w</span><span style="color:#710">'</span></span>) <span style="color:#080;font-weight:bold">as</span> outfile:
    json.dump(data, outfile)
</pre></div>
</div>
</div>

<h2 id="tocAnchor-1-3">YAML</h2>

<p><a href="https://en.wikipedia.org/wiki/YAML">YAML</a> is a configuration file format.
Wikipedia says:</p>

<blockquote>
  <p>YAML (rhymes with camel) is a human-readable data serialization format that
takes concepts from programming languages such as C, Perl, and Python, and
ideas from XML and the data format of electronic mail (RFC 2822). YAML was
first proposed by Clark Evans in 2001, who designed it together with 
Ingy döt Net and Oren Ben-Kiki.
It is available for several programming languages.</p>
</blockquote>

<p>The file itself might look like this:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#606">mysql</span>:
    <span style="color:#606">host</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">localhost</span></span>
    <span style="color:#606">user</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">root</span></span>
    <span style="color:#606">passwd</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">my secret password</span></span>
    <span style="color:#606">db</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">write-math</span></span>
<span style="color:#606">other</span>:
    <span style="color:#606">preprocessing_queue</span>:
        - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">preprocessing.scale_and_center</span></span>
        - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">preprocessing.dot_reduction</span></span>
        - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">preprocessing.connect_lines</span></span>
    <span style="color:#606">use_anonymous</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">yes</span></span>
</pre></div>
</div>
</div>

<p>You can read it like this:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">yaml</span>

<span style="color:#080;font-weight:bold">with</span> <span style="color:#369;font-weight:bold">open</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">config.yml</span><span style="color:#710">"</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">r</span><span style="color:#710">'</span></span>) <span style="color:#080;font-weight:bold">as</span> ymlfile:
    cfg = yaml.load(ymlfile)

<span style="color:#080;font-weight:bold">for</span> section <span style="color:#080;font-weight:bold">in</span> cfg:
    print(section)
print(cfg[<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">mysql</span><span style="color:#710">'</span></span>])
print(cfg[<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">other</span><span style="color:#710">'</span></span>])
</pre></div>
</div>
</div>

<p>It outputs:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>other
mysql
{<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">passwd</span><span style="color:#710">'</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">my secret password</span><span style="color:#710">'</span></span>,
 <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">host</span><span style="color:#710">'</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">localhost</span><span style="color:#710">'</span></span>,
 <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">db</span><span style="color:#710">'</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">write-math</span><span style="color:#710">'</span></span>,
 <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">user</span><span style="color:#710">'</span></span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">root</span><span style="color:#710">'</span></span>}
{<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">preprocessing_queue</span><span style="color:#710">'</span></span>: [<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">preprocessing.scale_and_center</span><span style="color:#710">'</span></span>,
                         <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">preprocessing.dot_reduction</span><span style="color:#710">'</span></span>,
                         <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">preprocessing.connect_lines</span><span style="color:#710">'</span></span>],
 <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">use_anonymous</span><span style="color:#710">'</span></span>: <span style="color:#069">True</span>}
</pre></div>
</div>
</div>

<p>There is a <code>yaml.dump</code> method, so you can write the configuration the same way.
Just build up a dictionary.</p>

<p>YAML is used by the Blender project.</p>

<h4 id="resources">Resources</h4>
<ul>
  <li><a href="https://docs.python.org/3/library/configparser.html">Documentation</a></li>
</ul>

<h2 id="tocAnchor-1-4">INI</h2>

<p>INI files look like this:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>[mysql]
host=localhost
user=root
passwd=my secret password
db=write-math

[other]
preprocessing_queue=["preprocessing.scale_and_center",
                     "preprocessing.dot_reduction",
                     "preprocessing.connect_lines"]
use_anonymous=yes
</pre></div>
</div>
</div>

<h3 id="tocAnchor-1-4-1">ConfigParser</h3>

<h4 id="basic-example">Basic example</h4>
<p>The file can be loaded and used like this:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#777">#!/usr/bin/env python</span>

<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">ConfigParser</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">io</span>

<span style="color:#777"># Load the configuration file</span>
<span style="color:#080;font-weight:bold">with</span> <span style="color:#369;font-weight:bold">open</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">config.yml</span><span style="color:#710">"</span></span>) <span style="color:#080;font-weight:bold">as</span> f:
    sample_config = f.read()
config = ConfigParser.RawConfigParser(allow_no_value=<span style="color:#069">True</span>)
config.readfp(io.BytesIO(sample_config))

<span style="color:#777"># List all contents</span>
print(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">List all contents</span><span style="color:#710">"</span></span>)
<span style="color:#080;font-weight:bold">for</span> section <span style="color:#080;font-weight:bold">in</span> config.sections():
    print(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">Section: %s</span><span style="color:#710">"</span></span> % section)
    <span style="color:#080;font-weight:bold">for</span> options <span style="color:#080;font-weight:bold">in</span> config.options(section):
        print(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">x %s:::%s:::%s</span><span style="color:#710">"</span></span> % (options,
                                  config.get(section, options),
                                  <span style="color:#369;font-weight:bold">str</span>(<span style="color:#369;font-weight:bold">type</span>(options))))

<span style="color:#777"># Print some contents</span>
print(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#b0b">\n</span><span style="color:#D20">Print some contents</span><span style="color:#710">"</span></span>)
print(config.get(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">other</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">use_anonymous</span><span style="color:#710">'</span></span>))  <span style="color:#777"># Just get the value</span>
print(config.getboolean(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">other</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">use_anonymous</span><span style="color:#710">'</span></span>))  <span style="color:#777"># You know the datatype?</span>
</pre></div>
</div>
</div>

<p>which outputs</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>List <span style="color:#369;font-weight:bold">all</span> contents
Section: mysql
x host:::localhost:::&lt;<span style="color:#369;font-weight:bold">type</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">str</span><span style="color:#710">'</span></span>&gt;
x user:::root:::&lt;<span style="color:#369;font-weight:bold">type</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">str</span><span style="color:#710">'</span></span>&gt;
x passwd:::my secret password:::&lt;<span style="color:#369;font-weight:bold">type</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">str</span><span style="color:#710">'</span></span>&gt;
x db:::write-math:::&lt;<span style="color:#369;font-weight:bold">type</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">str</span><span style="color:#710">'</span></span>&gt;
Section: other
x preprocessing_queue:::[<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">preprocessing.scale_and_center</span><span style="color:#710">"</span></span>,
<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">preprocessing.dot_reduction</span><span style="color:#710">"</span></span>,
<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">preprocessing.connect_lines</span><span style="color:#710">"</span></span>]:::&lt;<span style="color:#369;font-weight:bold">type</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">str</span><span style="color:#710">'</span></span>&gt;
x use_anonymous:::yes:::&lt;<span style="color:#369;font-weight:bold">type</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">str</span><span style="color:#710">'</span></span>&gt;

Print some contents
yes
<span style="color:#069">True</span>
</pre></div>
</div>
</div>

<p>As you can see, you can use a standard data format that is easy to read and
write. Methods like <code>getboolean</code> and <code>getint</code> allow you to get the datatype
instead of a simple string.</p>

<h4 id="writing-configuration">Writing configuration</h4>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">os</span>
configfile_name = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">config.yaml</span><span style="color:#710">"</span></span>

<span style="color:#777"># Check if there is already a configurtion file</span>
<span style="color:#080;font-weight:bold">if</span> <span style="color:#080;font-weight:bold">not</span> os.path.isfile(configfile_name):
    <span style="color:#777"># Create the configuration file as it doesn't exist yet</span>
    cfgfile = <span style="color:#369;font-weight:bold">open</span>(configfile_name, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">w</span><span style="color:#710">'</span></span>)

    <span style="color:#777"># Add content to the file</span>
    Config = ConfigParser.ConfigParser()
    Config.add_section(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">mysql</span><span style="color:#710">'</span></span>)
    Config.set(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">mysql</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">host</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">localhost</span><span style="color:#710">'</span></span>)
    Config.set(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">mysql</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">user</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">root</span><span style="color:#710">'</span></span>)
    Config.set(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">mysql</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">passwd</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">my secret password</span><span style="color:#710">'</span></span>)
    Config.set(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">mysql</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">db</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">write-math</span><span style="color:#710">'</span></span>)
    Config.add_section(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">other</span><span style="color:#710">'</span></span>)
    Config.set(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">other</span><span style="color:#710">'</span></span>,
               <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">preprocessing_queue</span><span style="color:#710">'</span></span>,
               [<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">preprocessing.scale_and_center</span><span style="color:#710">'</span></span>,
                <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">preprocessing.dot_reduction</span><span style="color:#710">'</span></span>,
                <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">preprocessing.connect_lines</span><span style="color:#710">'</span></span>])
    Config.set(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">other</span><span style="color:#710">'</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">use_anonymous</span><span style="color:#710">'</span></span>, <span style="color:#069">True</span>)
    Config.write(cfgfile)
    cfgfile.close()
</pre></div>
</div>
</div>

<p>results in</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>[mysql]
host = localhost
user = root
passwd = my secret password
db = write-math

[other]
preprocessing_queue = ['preprocessing.scale_and_center', 'preprocessing.dot_reduction', 'preprocessing.connect_lines']
use_anonymous = True

</pre></div>
</div>
</div>

<h2 id="tocAnchor-1-6">XML</h2>

<p>Seems not to be used at all for configuration files by the Python community.
However, parsing / writing XML is easy and there are plenty of possibilities to
do so with Python. One is BeautifulSoup:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">from</span> <span style="color:#B44;font-weight:bold">BeautifulSoup</span> <span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">BeautifulSoup</span>

<span style="color:#080;font-weight:bold">with</span> <span style="color:#369;font-weight:bold">open</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">config.xml</span><span style="color:#710">"</span></span>) <span style="color:#080;font-weight:bold">as</span> f:
    content = f.read()

y = BeautifulSoup(content)
print(y.mysql.host.contents[<span style="color:#00D">0</span>])
<span style="color:#080;font-weight:bold">for</span> tag <span style="color:#080;font-weight:bold">in</span> y.other.preprocessing_queue:
    print(tag)
</pre></div>
</div>
</div>

<p>where the config.xml might look like this:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#070;font-weight:bold">&lt;config&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;mysql&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;host&gt;</span>localhost<span style="color:#070;font-weight:bold">&lt;/host&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;user&gt;</span>root<span style="color:#070;font-weight:bold">&lt;/user&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;passwd&gt;</span>my secret password<span style="color:#070;font-weight:bold">&lt;/passwd&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;db&gt;</span>write-math<span style="color:#070;font-weight:bold">&lt;/db&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/mysql&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;other&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;preprocessing_queue&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;li&gt;</span>preprocessing.scale_and_center<span style="color:#070;font-weight:bold">&lt;/li&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;li&gt;</span>preprocessing.dot_reduction<span style="color:#070;font-weight:bold">&lt;/li&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;li&gt;</span>preprocessing.connect_lines<span style="color:#070;font-weight:bold">&lt;/li&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/preprocessing_queue&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;use_anonymous</span> <span style="color:#b48">value</span>=<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">true</span><span style="color:#710">"</span></span> <span style="color:#070;font-weight:bold">/&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/other&gt;</span>
<span style="color:#070;font-weight:bold">&lt;/config&gt;</span>
</pre></div>
</div>
</div>

<h2 id="tocAnchor-1-7">File Endings</h2>

<p>File Endings give the user and the system an indicator about the content of a
file. Reasonable file endings for configuration files are</p>

<ul>
  <li><code>*config.py</code> for Python files</li>
  <li><code>*.yaml</code> or <code>*.yml</code> if the configuration is done in YAML format</li>
  <li><code>*.json</code> for configuration files written in JSON format</li>
  <li><code>*.cfg</code> or <code>*.conf</code> to indicate that it is a configuration file</li>
  <li><code>*.ini</code> for “initialization” are quite widespread (see <a href="https://en.wikipedia.org/wiki/INI_file">Wiki</a>)</li>
  <li><code>~/.[my_app_name]rc</code> is a VERY common naming scheme for configuration files on
Linux systems. RC is a reference to an old computer system and means
“run common”.</li>
</ul>

<p>That said, I think I prefer <code>*.conf</code>. I think it is a choice that users
understand.</p>

<p>But you might also consider that <code>*.ini</code> might get opened by standard in a
text editor. For the other options, users might get asked which program they
want to use.</p>

<h2 id="tocAnchor-1-8">Resources</h2>

<ul>
  <li><a href="http://json.parser.online.fr/">JSON Online Parser</a></li>
  <li><a href="http://stackoverflow.com/q/1726802/562769">What is the difference between YAML and JSON? When to prefer one over the other?</a></li>
  <li><a href="http://stackoverflow.com/q/791761/562769">Why do so many projects use XML for configuration files?</a></li>
  <li><a href="http://yamllint.com/">YAML Lint</a></li>
  <li><a href="http://i-tools.org/unserialize">INI file</a></li>
</ul>

                        </div>
                        <div class="postmeta">Posted in
                            
                                <a href="//martin-thoma.com/category/code/">code</a><!--TODO: Displayed category name should be upper case! -->
                             | Tags:
                            
                                
                                    <a href="//martin-thoma.com/tag/python/">Python</a>
                                
                            
                                , <a href="//martin-thoma.com/tag/yaml/">YAML</a>
                                
                            
                                , <a href="//martin-thoma.com/tag/json/">JSON</a>
                                
                            
                                , <a href="//martin-thoma.com/tag/xml/">XML</a>
                                
                            
                                , <a href="//martin-thoma.com/tag/ini/">INI</a>
                                
                            
                                , <a href="//martin-thoma.com/tag/configuration/">Configuration</a>
                                
                             by <a rel="author" class="vcard author" href="//martin-thoma.com/author/martin-thoma/"><span class="fn">Martin Thoma</span></a> on <span class="updated"><span class="value-title" title="2014-07-27 15:46:00 +0200">
                                July
                                27th
                                  ,
                                2014</span></span></div>

                            <div class="navigation clearfix">
                                <div class="alignleft">
                                
                                    &laquo; <a href="//martin-thoma.com/append-python-path/" rel="prev">Append Python PATH</a>
                                
                                </div>
                                <div class="alignright">
                                
                                    <a href="//martin-thoma.com/logging-in-python/" rel="next">Logging in Python</a> &raquo;
                                
                                </div>
                            </div>

                        </article>
                        <div id="respond">
                            <h3>Leave a Reply</h3>
                                <!-- comment discuss code -->
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'martinthoma'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="//disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    <!-- comment discuss code -->

                        </div>
                    </div>
                </div>
            <div class="span-8 last">
                <div id="subscriptions">
<a href="//martin-thoma.com/feed/"><img src="//martin-thoma.com/css/images/rss.png" alt="Subscribe to RSS Feed" title="Subscribe to RSS Feed" width="72" height="47" /></a>		
<a href="https://twitter.com/#!/themoosemind" title="Follow me on Twitter!"><img src="//martin-thoma.com/css/images/twitter.png" title="Follow me on Twitter!" alt="Follow me on Twitter!"  width="76" height="47" /></a>
</div>

                <div id="sidebar">
                <!-- type: searchbox.html - TODO-->
<ul>
    <li id="search">
        <div class="searchlayout">
            <form method="get" id="searchform" action="//google.com/cse" role="search">
                <input type="hidden" name="cx" value="017345337424948206369:qrnnnentkkk" />
                <input type="search" value="" name="q" id="s" placeholder="Search with Google"/>
                <input type="image" src="//martin-thoma.com/css/images/search.gif" style="border:0; vertical-align: top;" alt="search"/> 
            </form>
        </div>
    </li>
</ul>

                <div class="addthis_toolbox">   
    <div class="custom_images">
            <a href="//twitter.com/share?url=//martin-thoma.com/configuration-files-in-python&amp;hashtags=python,yaml,json,xml,ini,configuration,&amp;via=themoosemind" target="_blank"><img src="//martin-thoma.com/css/images/socialicons/twitter.png" width="32" height="32" alt="Twitter" /></a>
            <a href="//del.icio.us/post?url=//martin-thoma.com/configuration-files-in-python&amp;title=Configuration%20files%20in%20Python" target="_blank"><img src="//martin-thoma.com/css/images/socialicons/delicious.png" width="32" height="32" alt="Delicious" /></a>
            <a href="//www.facebook.com/sharer.php?u=//martin-thoma.com/configuration-files-in-python" target="_blank"><img src="//martin-thoma.com/css/images/socialicons/facebook.png" width="32" height="32" alt="Facebook" /></a>
            <a href="//digg.com/submit?phase=2&amp;url=//martin-thoma.com/configuration-files-in-python&amp;title=Configuration%20files%20in%20Python" target="_blank"><img src="//martin-thoma.com/css/images/socialicons/digg.png" width="32" height="32" alt="Digg" /></a>
            <a href="//www.stumbleupon.com/submit?url=//martin-thoma.com/configuration-files-in-python&amp;title=Configuration%20files%20in%20Python" target="_blank"><img src="//martin-thoma.com/css/images/socialicons/stumbleupon.png" width="32" height="32" alt="Stumbleupon" /></a>
            <a href="//plusone.google.com/_/+1/confirm?hl=en&amp;url=//martin-thoma.com/configuration-files-in-python" target="_blank"><img src="//martin-thoma.com/css/images/socialicons/gplus.png" width="32" height="32" alt="Google Plus" /></a>
            <a href="//reddit.com/submit?url=//martin-thoma.com/configuration-files-in-python&amp;title=Configuration%20files%20in%20Python" target="_blank"><img src="//martin-thoma.com/css/images/socialicons/reddit.png" width="32" height="32" alt="Reddit" /></a>
    </div>
</div>

                <ul>
                    <li id="categories-3" class="widget widget_categories">
                        <!-- type: categories -->
<h2 class="widgettitle">Categories</h2>
    <ul>
        <li class="cat-item cat-item-11"><a href="//martin-thoma.com/category/code/" title="Tipps for coding in different languages like Python oder C++.">Code</a></li>
        <li class="cat-item cat-item-21"><a href="//martin-thoma.com/category/web/" title="New emerging websites and technologies.">The Web</a></li>
        <li class="cat-item cat-item-31"><a href="//martin-thoma.com/category/cyberculture/" title="Lolcats, planking, Trollfaces, ...">Cyberculture</a></li>
        <li class="cat-item cat-item-3404"><a href="//martin-thoma.com/category/maths/" title="View all posts filed under Mathematics">Mathematics</a></li>
        <li class="cat-item cat-item-881"><a href="//martin-thoma.com/category/bits-and-bytes/" title="Sometimes posts don&#039;t fit in any category.">My bits and bytes</a></li>
        <li class="cat-item cat-item-41"><a href="//martin-thoma.com/category/deutschland/" title="[All Posts here are written in German about German topics] - Die Bahn, unsere Politik und Europa.">German posts</a></li>
	</ul>

                    </li>
                </ul>
                </div>
            </div>
        </div><!--/container-->
            <footer id="footer">
                <a href="//martin-thoma.com"><strong>Martin Thoma</strong></a> -  A blog about Code, the Web and Cyberculture. <br />
                <div class="footer-credits">
                    <a href="http://flexithemes.com/themes/modern-style/">Modern Style</a> theme by <a href="http://flexithemes.com/">FlexiThemes</a>
                </div>
            </footer><!--/footer-->

    </div><!--/wrapper-->
<!-- type: footer -->
<!-- TOC Plus -->
<script type='text/javascript'>
/* <![CDATA[ */
var tocplus = {"visibility_show":"show","visibility_hide":"hide","width":"275px"};
/* ]]> */
</script>
<script type='text/javascript' src="//martin-thoma.com/js/tocplus-front.js"></script>
<script>
(function(){
    'use strict';

    /*
    Create intra-page links
    Requires that your headings already have an `id` attribute set (because that's what jekyll does)
    For every heading in your page, this adds a little anchor link `#` that you can click to get a permalink to the heading.
    Ignores `h1`, because you should only have one per page.
    The text content of the tag is used to generate the link, so it will fail "gracefully-ish" if you have duplicate heading text.

    Credit: https://gist.github.com/SimplGy/a229d25cdb19d7f21231
     */

    var headingNodes = [], results, link,
        tags = ['h2', 'h3', 'h4', 'h5', 'h6'];

    tags.forEach(function(tag){
        var contentTag = document.getElementById('contentAfterTitle');
      results = contentTag.getElementsByTagName(tag);
      Array.prototype.push.apply(headingNodes, results);
    });

    headingNodes.forEach(function(node){
      link = document.createElement('a');
      link.className = 'deepLink';
      link.textContent = ' ¶';
      link.href = '#' + node.getAttribute('id');
      node.appendChild(link);
    });

  })();
</script>
</body>
</html>

