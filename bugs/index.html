<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Martin Thoma" />
        <meta name="copyright" content="Martin Thoma" />
        <link title = "Martin Thoma"
              type  = "application/opensearchdescription+xml"
              rel   = "search"
              href  = "../opensearch.xml">

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="Software Engineering, Bugs, Code, " />

<meta property="og:title" content="Bugs "/>
<meta property="og:url" content="bugs/" />
<meta property="og:description" content="Every software project which is not absolutely tiny likely has (or had) bugs, but astonishingly I learned very little about bugs during my university studies. So let&#39;s summarize a few important things. What are bugs I define a bug like this: A software bug is a fault in software that …" />
<meta property="og:site_name" content="Martin Thoma" />
<meta property="og:article:author" content="Martin Thoma" />
<meta property="og:article:published_time" content="2018-08-21T20:00:00+02:00" />
<meta name="twitter:title" content="Bugs ">
<meta name="twitter:description" content="Every software project which is not absolutely tiny likely has (or had) bugs, but astonishingly I learned very little about bugs during my university studies. So let&#39;s summarize a few important things. What are bugs I define a bug like this: A software bug is a fault in software that …">
<meta property="og:image" content="logos/bug.png" />
<meta name="twitter:image" content="logos/bug.png" >

        <title>Bugs  · Martin Thoma
</title>
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="../theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="../theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="../theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="../static/print.css" media="print">
        <link rel="stylesheet" type="text/css" href="../static/custom.css" media="screen">

        <!-- MathJax -->
<script type="text/x-mathjax-config">
<!--
MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [ ['$$', '$$'], ['\\[','\\]']],
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
    processEscapes: true
  }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
// -->
</script>
<script type="text/javascript" async
  src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

        <link href="https://martin-thoma.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Martin Thoma - Full Atom Feed" />
        <link href="https://martin-thoma.com/feeds/index.xml" type="application/rss+xml" rel="alternate" title="Martin Thoma - Full RSS Feed" />
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top navbar-default">
            <div class="container">
                <div class="container-fluid">
                    <div class="collapse navbar-collapse">
                        <ul class="nav pull-left top-menu navbar-nav">
                            <li><a href=".." style="font-family: 'Monaco', 'Inconsolata', 'Andale Mono', 'Lucida Console', 'Bitstream Vera Sans Mono', 'Courier New', Courier, Monospace;
                        font-size: 20px;" class="navbar-brand" tabindex="-1">Martin Thoma</a>
                            </li>
                        </ul>
                        <ul class="nav pull-right top-menu navbar-nav">
                            <li ><a href="..">Home</a></li>
                            <li ><a href="../categories.html">Categories</a></li>
                            <li ><a href="../tags.html">Tags</a></li>
                            <li ><a href="../archives.html">Archives</a></li>
                            <li><a href="../support-me/">Support me</a></li>
                            <li><form class="navbar-form" action="../search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="search" class="search-query form-control" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row">
                <div class="col-sm-1 col-md-1"></div>
                <div class="col-sm-10 col-md-10">
<!-- article.html -->
<article>
<div class="row">
    <header class="page-header col-sm-10 col-md-10 col-md-offset-2">
    <h1><a href="../bugs/">Bugs</a></h1>
    </header>
</div>

<div class="row">
    <div class="col-sm-2 col-md-2 table-of-content">
        <nav>
        <h4>Contents</h4>
        <div id="toc"><ul><li><a class="toc-href" href="#" title="Bugs">Bugs</a><ul><li><a class="toc-href" href="#what-are-bugs" title="What are bugs">What are bugs</a></li><li><a class="toc-href" href="#types-of-bugs" title="Types of Bugs">Types of Bugs</a><ul><li><a class="toc-href" href="#functional-bugs" title="Functional Bugs">Functional Bugs</a></li><li><a class="toc-href" href="#non-functional-bugs" title="Non-Functional Bugs">Non-Functional Bugs</a></li></ul></li><li><a class="toc-href" href="#bug-reporting_1" title="Bug reporting">Bug reporting</a></li><li><a class="toc-href" href="#logging" title="Logging">Logging</a></li><li><a class="toc-href" href="#triaging-bugs" title="Triaging Bugs">Triaging Bugs</a></li><li><a class="toc-href" href="#see-also" title="See also">See also</a></li></ul></li></ul></div>
        </nav>
    </div>
    <div class="col-sm-8 col-md-8 article-content" id="contentAfterTitle">

            
            <p>Every software project which is not absolutely tiny likely has (or had) bugs,
but astonishingly I learned very little about bugs during my university
studies. So let's summarize a few important things.</p>
<h2 id="what-are-bugs">What are bugs</h2>
<p>I define a bug like this:</p>
<blockquote>
<p>A <em>software bug</em> is a fault in software that causes incorrect behaviour.</p>
</blockquote>
<p>An example would be this <code>sum.py</code> executed with Python 3:</p>
<div class="highlight"><pre><span></span><code>print("Please enter two numbers you would like to add:")
n1 = input()
n2 = input()
print("The summ of those two numbers is {}".format(n1 + n2))
</code></pre></div>
<p>If you enter <code>42</code> and <code>1337</code> it will give <code>421337</code>. The reason for this
behavior is that <code>input()</code> returns a string, not a number. So clearly neither
the developer nor the user want this behaviour. But it is not always that easy.
Sometimes the design of the application might be misleading. Is that a bug as
well? I tend to say "no" if the developer wanted the behaviour to be as it is.
Then it is just bad design.</p>
<h2 id="types-of-bugs">Types of Bugs</h2>
<p>I would like to give you some ideas which types of bugs can happen and - if
possible - how to prevent them.</p>
<h3 id="functional-bugs">Functional Bugs</h3>
<p><strong>Off by one errors</strong> are super common: Smaller or smaller equal? Greater or
greater equal? Smaller or greater? They are a logic error which can often be
covered by calling the function using it by example input and checking the
actual output againts known example output. Those off-by-one errors can also
easily lead to infinite loops.</p>
<p><strong>Units of measure</strong> are a common one as well. Is "time" measured in hours or
seconds? Do we use miles or kilometers? Famously, NASA lost a 125,000,000 USD Mars orbiter due to this bug (<a href="https://en.wikipedia.org/wiki/Mars_Climate_Orbiter#Cause_of_failure">source</a>).
Luckily, this one can be prevented
by using unit libraries like <a href="https://pint.readthedocs.io/en/latest/">Pythons Pint</a>.</p>
<p><strong>Race conditions</strong> are one of the ugly bugs that only appear sometimes, even
if you call the program with exactly the same input. They might even disappear
completely when you try to investigate them. As an example, imagine a bank
account. You have one process P-in which receives ingoing transactions and
another process P-out that handles outgoing transactions:</p>
<p>P1:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">transfer_money</span><span class="p">(</span><span class="n">account</span><span class="p">,</span> <span class="n">pay_amount</span><span class="p">):</span>  <span class="c1"># L0</span>
    <span class="n">current_total</span> <span class="o">=</span> <span class="n">account</span><span class="o">.</span><span class="n">get_current_total</span><span class="p">()</span>  <span class="c1"># L1</span>
    <span class="n">updated_total</span> <span class="o">=</span> <span class="n">current_total</span> <span class="o">-</span> <span class="n">pay_amount</span>  <span class="c1"># L2</span>
    <span class="n">account</span><span class="o">.</span><span class="n">set_current_total</span><span class="p">(</span><span class="n">updated_total</span><span class="p">)</span>  <span class="c1"># L3</span>
</code></pre></div>
<p>P2:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">receive_money</span><span class="p">(</span><span class="n">account</span><span class="p">,</span> <span class="n">get_amount</span><span class="p">):</span>  <span class="c1"># L4</span>
    <span class="n">current_total</span> <span class="o">=</span> <span class="n">account</span><span class="o">.</span><span class="n">get_current_total</span><span class="p">()</span>  <span class="c1"># L5</span>
    <span class="n">updated_total</span> <span class="o">=</span> <span class="n">current_total</span> <span class="o">+</span> <span class="n">get_amount</span>  <span class="c1"># L6</span>
    <span class="n">account</span><span class="o">.</span><span class="n">set_current_total</span><span class="p">(</span><span class="n">updated_total</span><span class="p">)</span>  <span class="c1"># L7</span>
</code></pre></div>
<p>You have 3141 EUR on that account identified by 'FortKnox'. At midnight in the
beginning of year 2018, you receive 42 EUR from your awesome company as a gift
for the New Year and you have to pay 1337 EUR in rent. Both happen pretty much
at the same time. They are not really in parallel, but interleaved:</p>
<table class="table">
<tr>
<th>Step</th>
<th>Time</th>
<th>Code</th>
<th>Relevant Memory</th>
<th>Bank Account</th>
</tr>
<tr>
<td>S1</td>
<td>2018-01-01 00:00:00.000</td>
<td>L0</td>
<td>account = 'Martin', pay_amount = 1337</td>
<td>3141</td>
</tr>
<tr>
<td>S2</td>
<td>2018-01-01 00:00:00.022</td>
<td>L4</td>
<td>account = 'Martin', get_amount = 42</td>
<td>3141</td>
</tr>
<tr>
<td>S3</td>
<td>2018-01-01 00:00:00.030</td>
<td>L5</td>
<td>get_amount = 42, current_total = 3141</td>
<td>3141</td>
</tr>
<tr>
<td>S4</td>
<td>2018-01-01 00:00:00.051</td>
<td>L1</td>
<td>pay_amount = 1337, <span style="color: red">current_total = 3141</span></td>
<td>3141</td>
</tr>
<tr>
<td>S5</td>
<td>2018-01-01 00:00:00.072</td>
<td>L2</td>
<td>updated_total = 1804</td>
<td>3141</td>
</tr>
<tr>
<td>S6</td>
<td>2018-01-01 00:00:00.180</td>
<td>L3</td>
<td></td>
<td>1804</td>
</tr>
<tr>
<td>S7</td>
<td>2018-01-01 00:00:00.193</td>
<td>L6</td>
<td>updated_total = 3183</td>
<td>1804</td>
</tr>
<tr>
<td>S8</td>
<td>2018-01-01 00:00:00.237</td>
<td>L7</td>
<td></td>
<td style="background-color: #ffa9a9;">3183</td>
</tr>
</table>
<p>Two resources access the same data - the current value of the bank account.
This is problematic. You can prevent this by making both of the functions atomic, e.g. by locking
or by using <a href="https://en.wikipedia.org/wiki/Atomicity_(database_systems)">atomic database operations</a>.
Rust introduced the concept of ownership to solve this (<a href="https://doc.rust-lang.org/nomicon/races.html">details</a>).</p>
<p><strong>Arithmetic errors</strong> are division by zero or taking the logarithm of something
non-positive. It can be prevented in some cases by adding a small positive
constant, but it depends a lot on the usecase if this is valid.</p>
<p><strong>Uninitialized resources</strong> (e.g. Nullpointer Exception or <code>KeyError</code> in Python)
I think are mostly covered by line coverage in unit tests.</p>
<h3 id="non-functional-bugs">Non-Functional Bugs</h3>
<p>One of the most common non-functional bugs is that the code is <strong>too slow</strong>.
You can get a grasp of this with <a href="https://pypi.org/project/pytest-benchmark/"><code>pytest-benchmark</code></a>,
but the problem is that it depends on the hardware and what you run at the same
time on the machine.</p>
<p>Another one I see often with browsers is that it is <strong>too memory intensive</strong>.
I guess that is a problem for smartphones as well.</p>
<p>Speaking of smartphones, <strong>too power intensive</strong> is certainly another one.</p>
<h2 id="bug-reporting_1">Bug reporting</h2>
<p>When reporting bugs, please don't only say "it doesn't work" or "it's broken".
That doesn't help. what does help, is answers to the following questions:</p>
<ol>
<li>What did you do?</li>
<li>What did you expect to happen?</li>
<li>What actually happened?</li>
</ol>
<p>Ideally, you can figure out a minimal setting how to reproduce it.</p>
<p>If you have a Stacktrace or some error code that is good as well.</p>
<h2 id="logging">Logging</h2>
<p>Developers have to think about the potential of bugs before they happen in
production. Which information will be useful to see if a bug occurs?</p>
<p>For web services, it is often some kind of user ID. We want to know who
experienced the issue.</p>
<h2 id="triaging-bugs">Triaging Bugs</h2>
<p><a href="https://blog.codinghorror.com/not-all-bugs-are-worth-fixing/">Not all bugs are worth fixing</a>,
as Jeff Atwood nicely formulated it in 2006. According to <a href="https://ericsink.com/articles/Four_Questions.html">Eric Sink</a>
you should answer four questions if you want to figure out if a bug is worth
being fixed:</p>
<ul>
<li><strong>Severity</strong>: When this bug happens, how bad is the impact?</li>
<li><strong>Frequency</strong>: How often does this bug happen?</li>
<li><strong>Cost</strong>: How much effort would be required to fix this bug?</li>
<li><strong>Risk</strong>: What is the risk of fixing this bug?</li>
</ul>
<p>While the first two seem very obvious to me and the cost question of course
is important as well, the risk is harder to understand. What risk could fixing
a bug potentially have?</p>
<p>Regression bugs. By touching any code, you can break something. If you touch
something that was super hard to get right or that inherently has risk (e.g.
deleting stuff permanently), then any bug related to those has a high risk.</p>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/List_of_software_bugs">List of software bugs</a></li>
</ul>
            
            <div id="disqus_thread" class="no-print"></div>
<script>
    /*
    var disqus_config = function () {
        this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() {  // REQUIRED CONFIGURATION VARIABLE: EDIT THE SHORTNAME BELOW
        var d = document, s = d.createElement('script');

        s.src = '//martinthoma.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

            <hr/>
        </div>
        <section>
        <div class="col-sm-2 col-md-2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2018-08-21T20:00:00+02:00">Aug 21, 2018</time>
            <br/>
            by <a rel="author" class="vcard author post-author" itemprop="author" href="../author/martin-thoma/"><span class="fn" itemscope="" itemtype="https://schema.org/Person"><span itemprop="name">Martin Thoma</span></span></a>
            <h4>Category</h4>
            <a class="category-link" href="../categories.html#code-ref">Code</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="../tags.html#bugs-ref">Bugs
                    <span>2</span>
</a></li>
                <li><a href="../tags.html#software-engineering-ref">Software Engineering
                    <span>15</span>
</a></li>
            </ul>
<h4>Contact</h4>
    <a href="https://twitter.com/_martinthoma" title="My Twitter Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-twitter sidebar-social-links"></i></a>
    <a href="mailto:info@martin-thoma.de" title="My Email Address" class="sidebar-social-links" target="_blank">
    <i class="fa fa-envelope sidebar-social-links"></i></a>
    <a href="https://github.com/MartinThoma" title="My Github Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-github sidebar-social-links"></i></a>
    <a href="http://stackoverflow.com/users/562769/martin-thoma" title="My Stackoverflow Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-stackoverflow sidebar-social-links"></i></a>
        </div>
        </section>
</div>
</article>
                </div>
                <div class="col-sm-1 col-md-1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
<footer class="no-print">
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-subtitle"><span class="site-name">Martin Thoma</span> - A blog about Code, the Web and Cyberculture</li>
        <li><a href="https://martin-thoma.com/email-subscription">E-mail subscription</a></li>
        <li><a href="https://martin-thoma.com/feeds/index.xml">RSS-Feed</a></li>
        <li><a href="http://www.martin-thoma.de/privacy.htm">Privacy/Datenschutzerkl&auml;rung</a></li>
        <li><a href="http://www.martin-thoma.de/impressum.htm">Impressum</a></li>
        <li class="elegant-power">Powered by
            <a href="https://blog.getpelican.com/" title="Pelican Home Page" tabindex="-1">Pelican</a>.
            Theme: <a href="https://elegant.oncrashreboot.com" title="Theme Elegant Home Page" tabindex="-1">Elegant</a>
            by <a href="https://www.oncrashreboot.com/" title="Talha Mansoor Home Page" tabindex="-1">Talha Mansoor</a></li>
    </ul>
</div>
</footer>        <script src="//code.jquery.com/jquery.min.js"></script>
        <!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>
        <script>
(function(){
    'use strict';

    /*
    Create intra-page links
    Requires that your headings already have an `id` attribute set
    For every heading in your page, this adds a little anchor link `#` that you can click to get a permalink to the heading.
    Ignores `h1`, because you should only have one per page.
    The text content of the tag is used to generate the link, so it will fail "gracefully-ish" if you have duplicate heading text.

    Credit: https://gist.github.com/SimplGy/a229d25cdb19d7f21231
     */

    var headingNodes = [], results, link,
        tags = ['h2', 'h3', 'h4', 'h5', 'h6'];

    tags.forEach(function(tag){
        var contentTag = document.getElementById('contentAfterTitle');
      results = contentTag.getElementsByTagName(tag);
      Array.prototype.push.apply(headingNodes, results);
    });

    headingNodes.forEach(function(node){
      link = document.createElement('a');
      link.className = 'deepLink';
      link.textContent = ' ¶';
      link.href = '#' + node.getAttribute('id');
      node.appendChild(link);
    });

  })();
</script>
    </body>
    <!-- Theme: Elegant built for Pelican
    License : https://elegant.oncrashreboot.com -->
</html>