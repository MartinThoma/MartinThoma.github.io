<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Search Engine Autodiscovery</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="site">
          <div class="header">
            <h1 class="title"><a href="/">Martin Thoma</a></h1>
            <a class="extra" href="/">home</a>
          </div>

          <h2>Search Engine Autodiscovery</h2>
<p class="meta">22 Oct 2011</p>

<div class="post">
<p>Recently I read a very good post about search engine autodiscovery <a href="http://www.knallisworld.de/blog/2011/04/14/autodiscovery-der-searchengine-in-google-chrome-opensearch/">by Jan Phillip</a>. Did you know that many browsers can detect an internal search engine automatically?
Firefox gives you the possibility to add such a search engine to your browser:
[caption id="attachment_6921" align="aligncenter" width="294" caption="Firefox: Add search engine detected via autodiscovery"]<a href="http://martin-thoma.com/wp-content/uploads/2011/10/firefox-add-search-engine.png"><img src="http://martin-thoma.com/wp-content/uploads/2011/10/firefox-add-search-engine.png" alt="Firefox: Add search engine detected via autodiscovery" title="Firefox: Add search engine detected via autodiscovery" width="294" height="236" class="size-full wp-image-6921" /></a>[/caption]</p>

<h2>OpenSearch</h2>


<p><a href="http://en.wikipedia.org/wiki/OpenSearch">OpenSearch</a> is a collection of technologies. This project aims to create a standard for publishing the metadata which describes a search engine: name, description, URL-pattern, language, ...</p>

<p>A <abbr title="OpenSearch Description Document">OSSD</abbr> looks like this:
[xml]<OpenSearchDescription xmlns="http://a9.com/-/spec/opensearch/1.1/">
    <ShortName>Example</ShortName>
    <Description>My example search engine</Description>
    <InputEncoding>UTF-8</InputEncoding>
    <Image height="16" width="16" type="image/x-icon">
        http://example.org/favicon.ico
    </Image>
    <Url type="text/html"
         template="http://example.org/index.html#search={searchTerms}"/>
</OpenSearchDescription>[/xml]</p>

<p>The browser needs a hint where it can find the OSSD. So you have to add the following tag to your website:
[xml]<link title = "Example"
      type  = "application/opensearchdescription+xml"
      rel   = "search"
      href  = "http://example.org/opensearch.xml">[/xml]</p>

<p>Now you can add the websites internal search engine automatically to Chrome and easily to Firefox and Internet Explorer 8+.</p>

<p>Additionally, you can add this little piece of JavaScript to tell Firefox 2+ and Internet Explorer 7+ that your site supports OpenSearch:
[javascript]window.external.AddSearchProvider("http://exampl.org/opensearch.xml");[/javascript]</p>

<h2>Google Chrome Autodiscovery</h2>


<p>Google doesn't provide a <abbr title="user interface">UI</abbr> for adding an internal search engine. Instead, you can add it via Settings:</p>

<p>[caption id="attachment_6891" align="aligncenter" width="300" caption="Add Search Engines via Settings in Google Chrome"]<a href="http://martin-thoma.com/wp-content/uploads/2011/10/google-chrome-add-search.png"><img src="http://martin-thoma.com/wp-content/uploads/2011/10/google-chrome-add-search-300x206.png" alt="Add Search Engines via Settings in Google Chrome" title="Add Search Engines via Settings in Google Chrome" width="300" height="206" class="size-medium wp-image-6891" /></a>[/caption]</p>

<p>Chrome also adds the sites internal search engine automatically. Did you ever notice this? Here are some screenshots:</p>

<p>[caption id="attachment_6841" align="aligncenter" width="659" caption="Google Chrome Search - Hit tab to search this site"]<a href="http://martin-thoma.com/wp-content/uploads/2011/10/google-chrome-search-1.png"><img src="http://martin-thoma.com/wp-content/uploads/2011/10/google-chrome-search-1.png" alt="Google Chrome Search - Hit tab to search this site" title="Google Chrome Search - Hit tab to search this site" width="659" height="31" class="size-full wp-image-6841" /></a>[/caption]</p>

<p>[caption id="attachment_6851" align="aligncenter" width="656" caption="Google Chrome Search - Search with the websites internal search engine"]<a href="http://martin-thoma.com/wp-content/uploads/2011/10/google-chrome-search-2.png"><img src="http://martin-thoma.com/wp-content/uploads/2011/10/google-chrome-search-2.png" alt="Google Chrome Search - Search with the websites internal search engine" title="Google Chrome Search - Search with the websites internal search engine" width="656" height="30" class="size-full wp-image-6851" /></a>[/caption]</p>

<p>Interestingly the auto discovery only works if the search engine is at the homepage. You have to have either an input field of the type "search" or of the type "text" with the name "s":
[html]<form>
  <input type="search" name="s" />
</form>[/html]</p>

<p>or</p>

<p>[html]<form>
  <input type="text" name="s" />
</form>[/html]</p>

<h2>Drawbacks</h2>


<ul>
  <li>It seems as if Safari didn't support OSSD natively. (14.04.2011)</li>
  <li>Internet Explorer 9 seems not to support OSSD.</li>
  <li>No support by Opera.</li>
</ul>




<h2>This article in a nutshell</h2>


<ul>
  <li>opensearch.xml gives meta information about your websites internal search engine</li>
  <li>For Chromes autodiscovery you will need to add an input fild with "type=search" or "name=s"</li>
  <li>It is not necessary for Chrome that the user can see the form (display:none with CSS) nor that it the site start page is loaded long (meta redirect after 0 seconds).</li>
  <li>Adding the search engine manually is possible in almost all browsers</li>
  <li>With OSSD you can manage more than one internal search engine.</li>
</ul>




<h2>Further reading</h2>


<ul>
  <li>OpenSearch.org:
    <ul>
      <li><a href="http://www.opensearch.org/Community/OpenSearch_search_clients">OpenSearch search clients</a></li>
  <li><a href="http://www.opensearch.org/Documentation/Developer_best_practices_guide">Developer best practices guide</a></li>
    </ul>
  </li>
  <li>David Walsh: <a href="http://davidwalsh.name/open-search">Add Your Website to Firefox&rsquo;s Search Bar Using OpenSearch XML</a>.</li>
</ul>



<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script>
</div>

            <div class="footer">
    <div class="contact">
      <p>
        Martin<br />
        What You Are<br />
        you@example.com
      </p>
    </div>
    <div class="contact">
      <p>
        <a href="https://github.com/yourusername">github.com/yourusername</a><br />
        <a href="https://twitter.com/yourusername">twitter.com/yourusername</a><br />
      </p>
    </div>
  </div>

        </div>
    </body>
</html>
