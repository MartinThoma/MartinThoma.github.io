<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>C++ Preprocessor Snippets</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="site">
          <div class="header">
            <h1 class="title"><a href="/">Martin Thoma</a></h1>
            <a class="extra" href="/">home</a>
          </div>

          <h2>C++ Preprocessor Snippets</h2>
<p class="meta">25 Dec 2012</p>

<div class="post">
<p>The C++ Preprocessor - which is in fact the same as the C Preprocessor - provides some very basic, but powerful abilities. I haven't used them quite often, but I have seen some nice examples. So here are some C++ Preprocessor Snippets:</p>

<h2>Maximum / Minimum</h2>


<p>If you want to find the maximum / minimum of two elements, no matter of which type, you can do something like this:</p>

<p>[cpp]#include <iostream></p>

<h1>define MAX(a, b) ((a &lt; b) ? b : a)</h1>

<p>using namespace std;</p>

<p>int main() {
    cout &lt;&lt; MAX(42, 1337) &lt;&lt; endl;
    cout &lt;&lt; MAX(1337, 42) &lt;&lt; endl;
    cout &lt;&lt; MAX(-1337, 42) &lt;&lt; endl;
    cout &lt;&lt; MAX(1337.0, 42) &lt;&lt; endl;
    return 0;
}[/cpp]</p>

<h2>Absolute Value</h2>


<p>You can get the absolute value like this:
[cpp]#include <iostream></p>

<h1>define ABS(a) (a &lt; 0 ? -(a) : a)</h1>

<p>using namespace std;</p>

<p>int main() {
    int a = 42, b = -43, c = 0, d = -1337;</p>

<pre><code>cout &lt;&lt; ABS(a) &lt;&lt; endl;
cout &lt;&lt; ABS(b) &lt;&lt; endl;
cout &lt;&lt; ABS(c) &lt;&lt; endl;
cout &lt;&lt; ABS(d) &lt;&lt; endl;
return 0;
</code></pre>

<p>}[/cpp]</p>

<p>By the way, brackets around <code>a</code> are important, because without them you could get:</p>

<p>[text]a=1,b=3
ABS(a-b) = ABS(1-3) = (1-3 &lt; 0 ? -1-3 : 1-3) = -2 &lt; 0 ? -4 : -2 = -4[/text]</p>

<h2>Swap variable content</h2>


<p>This is an example for a multiline replacement.</p>

<p>[cpp]#include <iostream></p>

<h1>define SWAP(a, b)  {   int tmp; \</h1>

<pre><code>                    tmp = b; \
                    b = a;   \
                    a = tmp; \
                }
</code></pre>

<p>using namespace std;</p>

<p>int main() {
    int a = 42, b = 1337;
    swap(a, b);
    cout &lt;&lt; a &lt;&lt; endl;
    cout &lt;&lt; b &lt;&lt; endl;
    return 0;
}[/cpp]</p>

<h2>See also</h2>


<ul>
    <li>Wikipedia: <a href="http://en.wikipedia.org/wiki/C_preprocessor">C preprocessor</a></li>
    <li>Tips and tricks using the preprocessor: <a href="http://www.iar.com/Global/Resources/Developers_Toolbox/C_Cplusplus_Programming/Tips%20and%20tricks%20using%20the%20preprocessor%20(part%20one).pdf">Part one</a> - <a href="http://www.iar.com/Global/Resources/Developers_Toolbox/C_Cplusplus_Programming/Tips%20and%20tricks%20using%20the%20preprocessor%20(part%20two).pdf">part two</a><br/>
A very good article about the meaning of #import, #error, #pragma. It is written very well and has some examples.</li>
    <li>Obfuscated C: <a href="http://www.cise.ufl.edu/~manuel/obfuscate/pi.c">Calculate PI</a></li>
</ul>


<p>Do you know more preprocessor snippets that are used very often or which are interesting?</p>


<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script>
</div>

            <div class="footer">
    <div class="contact">
      <p>
        Martin<br />
        What You Are<br />
        you@example.com
      </p>
    </div>
    <div class="contact">
      <p>
        <a href="https://github.com/yourusername">github.com/yourusername</a><br />
        <a href="https://twitter.com/yourusername">twitter.com/yourusername</a><br />
      </p>
    </div>
  </div>

        </div>
    </body>
</html>
