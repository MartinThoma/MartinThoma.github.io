<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Perfect number check and ROT-13 encryption in MIPS-assembly code</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="site">
          <div class="header">
            <h1 class="title"><a href="/">Martin Thoma</a></h1>
            <a class="extra" href="/">home</a>
          </div>

          <h2>Perfect number check and ROT-13 encryption in MIPS-assembly code</h2>
<p class="meta">22 Jun 2012</p>

<div class="post">
<h2>Perfect number check</h2>


<p>The perfect number check in MIPS is quite easy to realize. Here is some pythonic Pseudocode</p>

<div class="highlight"><pre><code class="python"><span class="n">n</span> <span class="o">=</span> <span class="nb">input</span><span class="p">()</span>           <span class="c"># read a positive integer n from the user</span>
<span class="n">sumOfDivisors</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span> <span class="c"># go from 1 to n-1</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>        <span class="c"># if i is a divisor</span>
        <span class="n">sumOfDivisors</span> <span class="o">+=</span> <span class="n">i</span>

<span class="k">if</span> <span class="n">sumOfDivisors</span> <span class="o">==</span> <span class="n">n</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;1&quot;</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;0&quot;</span>
</code></pre></div>


<p>And here is the MIPS-Code:
[text]#####################################################################</p>

<h1>Perfect number check</h1>

<h1>@param int the number you would like to check</h1>

<h1>@result int 0 if the number is not perfect, otherwise 1</h1>

<h6>#</h6>

<p>.data
    prompt: .asciiz "Positive integer you would like to check : "
    output: .asciiz "Is a perfect number (1: Yes, 0: No): "
.text
.globl main
main: li $v0 , 4        # |
    la $a0 , prompt     # |
    syscall             # |=> Print string "prompt"
    li $v0 , 5          # |
    syscall             # |=> Ask for integer A</p>

<pre><code># Initialise variables
move $s0 , $v0      # =&gt; Store A in $s0
li $s1 , 0          # =&gt; The sum of all proper divisors of A
li $s2 , 1          # =&gt; start here with checks for devisors
</code></pre>

<p>s:  bgeu $s2, $s0, eval # while $s2 &lt; $s0
    rem $t0, $s0, $s2   # $t0 = $s0 % $s2
    bne $t0, $0, w
    addu $s1, $s1, $s2  # $s1 += $s2
w:  addi $s2, $s2, 1    # $s2++
    j s;                # /endwhile</p>

<p>eval: seq $s0, $s0, $s1 # Compare the sum of divisors with A  <br/>
    li $v0 , 4          # |
    la $a0 , output     # |
    syscall             # |=> Print string "output"
    la $v0 , 1          # |
    move $a0 , $s0      # |
    syscall             # |=> Print $s0
    jr $ra[/text]</p>

<h2>ROT-13 encryption</h2>


<p>The basic idea for encrypting a string with ROT-13 is to loop over all characters and use the ASCII-Table to shift them. Here is the ROT-13 MIPS-Code:
[text]#####################################################################</p>

<h1>@param string a &#92;&#48; terminated string</h1>

<h1>@return string the ROT-13 encrypted string</h1>

<h6>#</h6>

<p>.data
    prompt: .asciiz "Please enter string: "
    output: .asciiz "ROT-13: "
    plain:  .space 64
.text
.globl main
main:
    li      $v0, 4      # |
    la      $a0, prompt # |
    syscall             # |=> Print string "prompt"
    li      $v0, 8      # |
    la      $a0, plain  # | => Ask for string plain
    li      $a1, 64     # |
    syscall             # | => read a string with max. 64 chars
    li      $t2, 10     # Stop by \n</p>

<pre><code># Loop over all characters
la      $t1, ($a0)  #=&gt;$t1:the current adress that gets modified
</code></pre>

<p>s:  lb      $t0, ($t1)  # => $t0: the current value (char)
    beq $t0, $t2, out   # while $t1 != '\n'
    li $t3, 64
    bge $t3, $t0, w     # if $t0 &lt;= 64: jump to w
    li $t3, 123
    bge $t0, $t3, w     # if $t0 >= 123: jump to w
    li $t3, 90
    bge $t3, $t0, big   # if $t0 &lt;= 90: jump to big
    li $t3, 96
    bge $t3, $t0, w     # if $t0 &lt;= 96: jump to w
    j small
w:  addi $t1, $t1, 1    # $t1++
    j s;                # /endwhile</p>

<p>small:
    addi    $t0, -84    # -97 + 13
    rem     $t0, $t0, 26 # $t0 %= 26
    addi    $t0, 97
    sb      $t0, ($t1)
    j w</p>

<p>big:
    addi    $t0, -52    # -65 + 13
    rem     $t0, $t0, 26 # $t0 %= 26
    addi    $t0, 65
    sb      $t0, ($t1)
    j w</p>

<p>out:
    li      $v0, 4      # |
    la      $a0, output # |
    syscall             # |=> Print string "output"</p>

<pre><code>la      $v0, 4      # |
la      $a0, plain  # |
syscall             # |=&gt; Print plain
jr      $ra[/text]
</code></pre>

<p>A syntax-highlighted version of both code pieces is here: <a href='http://martin-thoma.com/wp-content/uploads/2012/06/mips-rot-13-perfect-number.pdf'>MIPS Assembly Code for a perfect number check and ROT-13 encryption</a>.</p>

<h2>See also</h2>


<ul>
  <li><a href="https://sourceforge.net/projects/spimsimulator/files/">SPIM MIPS Simulator</a></li>
  <li><a href="http://martin-thoma.com/how-print-mips-assembly-code-latex/" title="How to print MIPS assembly code in LaTeX">How to print MIPS assembly code in LaTeX</a></li>
  <li><a href="http://martin-thoma.com/add-mips-syntax-highlighting-gedit/" title="Add MIPS syntax highlighting to gEdit">Add MIPS syntax highlighting to gEdit</a></li>
  <li><a href='http://martin-thoma.com/wp-content/uploads/2012/06/mips-archive.zip'>Archive with MIPS assembly Code and LaTeX file</a></li>
</ul>



<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script>
</div>

            <div class="footer">
    <div class="contact">
      <p>
        Martin<br />
        What You Are<br />
        you@example.com
      </p>
    </div>
    <div class="contact">
      <p>
        <a href="https://github.com/yourusername">github.com/yourusername</a><br />
        <a href="https://twitter.com/yourusername">twitter.com/yourusername</a><br />
      </p>
    </div>
  </div>

        </div>
    </body>
</html>
