<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>How to parse command line arguments in Java</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="site">
          <div class="header">
            <h1 class="title"><a href="/">Martin Thoma</a></h1>
            <a class="extra" href="/">home</a>
          </div>

          <h2>How to parse command line arguments in Java</h2>
<p class="meta">19 Jul 2012</p>

<div class="post">
<p>If you are using Eclipse, you might want to add your arguments. To specify them, go to:
Run &rarr; Run Configurations ... &rarr; Arguments</p>

<h2>args4j</h2>


<blockquote>args4j is a small Java class library that makes it easy to parse command line options/arguments in your CUI application.</blockquote>


<p>Source: <a href="http://args4j.kohsuke.org/">args4j.kohsuke.org</a></p>

<p>Lets see how easy it really is.</p>

<h3>Requirements</h3>


<p>First, you have to get the package. It is not in my Ubuntu-Version, but <a href="http://packages.ubuntu.com/quantal/libargs4j-java">Ubuntu Quantal will have args4j</a>. The package is called <code>libargs4j-java</code>.</p>

<p>If you can't install it this way, you have to <a href="http://maven.jenkins-ci.org/content/repositories/releases/args4j/">download args4j</a>. Currently, it is <a href="http://maven.jenkins-ci.org/content/repositories/releases/args4j/args4j/2.0.21/args4j-2.0.21.jar">args4j-2.0.21.jar</a>.</p>

<p>You can add this as an external jar to Eclipse:</p>

<ol>
  <li>Right-click on your project.</li>
  <li>Select "Properties"</li>
  <li>Type "java build path" in the input field at the upper left corner of the window.</li>
</ol>


<p>Now it should look like this:
[caption id="attachment_33151" align="aligncenter" width="300"]<a href="http://martin-thoma.com/wp-content/uploads/2012/07/java-eclipse-project-properties-libraries.png"><img src="http://martin-thoma.com/wp-content/uploads/2012/07/java-eclipse-project-properties-libraries-300x214.png" alt="Project properties in Eclipse - Libraries" title="Project properties in Eclipse - Libraries" width="300" height="214" class="size-medium wp-image-33151" /></a> Project properties in Eclipse - Libraries[/caption]</p>

<p>Now you have to click on "Add External Jar" and add the args4j.jar file.</p>

<h3>Source Example</h3>


<p>As always in Java, you add another class for parsing your command line values. I've called it CommandLineValues.java and it does only check for the command line argument <code>-i FILE</code> or <code>--input FILE</code>.</p>

<p>[java]import java.io.File;</p>

<p>import org.kohsuke.args4j.CmdLineException;
import org.kohsuke.args4j.CmdLineParser;
import org.kohsuke.args4j.Option;</p>

<p>/<em>*
 * This class handles the programs arguments.
 </em>/
public class CommandLineValues {
    @Option(name = "-i", aliases = { "--input" }, required = true,
            usage = "input file with two matrices")
    private File source;</p>

<pre><code>private boolean errorFree = false;

public CommandLineValues(String... args) {
    CmdLineParser parser = new CmdLineParser(this);
    parser.setUsageWidth(80);
    try {
        parser.parseArgument(args);

        if (!getSource().isFile()) {
            throw new CmdLineException(parser,
                    "--input is no valid input file.");
        }

        errorFree = true;
    } catch (CmdLineException e) {
        System.err.println(e.getMessage());
        parser.printUsage(System.err);
    }
}

/**
 * Returns whether the parameters could be parsed without an
 * error.
 *
 * @return true if no error occurred.
 */
public boolean isErrorFree() {
    return errorFree;
}

/**
 * Returns the source file.
 *
 * @return The source file.
 */
public File getSource() {
    return source;
}
</code></pre>

<p>}[/java]</p>

<p>Here is some part of the main file:
[java]public static void main(String[] args) {
    CommandLineValues values = new CommandLineValues(args);
    CmdLineParser parser = new CmdLineParser(values);</p>

<pre><code>try {
    parser.parseArgument(args);
} catch (CmdLineException e) {
    System.exit(1);
}

// Now you can use the command line values
List&lt;ArrayList&lt;ArrayList&lt;Integer&gt;&gt;&gt; matrices =
    read(values.getSource());
ArrayList&lt;ArrayList&lt;Integer&gt;&gt; A = matrices.get(0);
ArrayList&lt;ArrayList&lt;Integer&gt;&gt; B = matrices.get(1);
int[][] C = ijkAlgorithm(A, B);
printMatrix(C);
</code></pre>

<p>}[/java]</p>

<h3>Usage Examples</h3>


<p>If you do not specify the required parameters, you get a quite good error message:
[bash]moose@pc07:~/Desktop$ java -jar matrix-multiplication.jar
Option "-i (--input)" is required
 -i (--input) FILE : input file with two matrices[/bash]</p>

<p>Help is <strong>not</strong> automatically generated:
[bash]moose@pc07:~/Desktop$ java -jar matrix-multiplication.jar --help
"--help" is not a valid option
 -i (--input) FILE : input file with two matrices[/bash]</p>

<p>If you want to have default parameters, you simply assign the values to the attributes:
[java]@Option(name = "-l", aliases = { "--leafsize" }, required = false,
        usage = "input file with two matrices")
private int leafsize = 32;[/java]
Note: <a href="http://stackoverflow.com/q/7834111/562769">How can I prevent Eclipse from adding the 'final' for certain lines of Java code?</a></p>

<h2>Commons CLI</h2>


<h3>Installation</h3>


<p>As for args4j, they offer a jar file which is in <a href="http://ftp-stud.hs-esslingen.de/pub/Mirrors/ftp.apache.org/dist//commons/cli/binaries/commons-cli-1.2-bin.tar.gz">commons-cli-1.2-bin.tar.gz</a> on the <a href="http://commons.apache.org/cli/download_cli.cgi">download-page</a>.</p>

<p>If you just want to test if you have the required packages, copy this piece of code to Eclipse:
[java]public class CommandLineValues {
    CommandLineParser parser = new BasicParser();
}[/java]</p>

<p>If you get the following error, you don't have the required <code>org.apache.commons.cli</code>:
[caption id="attachment_33201" align="aligncenter" width="431"]<a href="http://martin-thoma.com/wp-content/uploads/2012/07/java-eclipse-cli-lib-error.png"><img src="http://martin-thoma.com/wp-content/uploads/2012/07/java-eclipse-cli-lib-error.png" alt="Java error mentioned by Eclipse: Missing org.apache.commons.cli" title="Java error mentioned by Eclipse: Missing org.apache.commons.cli" width="431" height="89" class="size-full wp-image-33201" /></a> Java error mentioned by Eclipse: Missing org.apache.commons.cli[/caption]</p>

<h3>Usage examples</h3>


<p>I have not found a single, complete and working usage example.</p>

<h2>See also</h2>


<ul>
  <li><a href="http://stackoverflow.com/q/367706/562769">Is there a good command line argument parser for Java?</a> - A lot of other command line parsers are mentioned for Java.</li>
  <li><a href="http://args4j.kohsuke.org/args4j/apidocs/">args4j JavaDoc</a></li>
  <li><a href="http://commons.apache.org/cli/api-release/index.html">Apache CLI JavaDoc</a></li>
</ul>



<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script>
</div>

            <div class="footer">
    <div class="contact">
      <p>
        Martin<br />
        What You Are<br />
        you@example.com
      </p>
    </div>
    <div class="contact">
      <p>
        <a href="https://github.com/yourusername">github.com/yourusername</a><br />
        <a href="https://twitter.com/yourusername">twitter.com/yourusername</a><br />
      </p>
    </div>
  </div>

        </div>
    </body>
</html>
