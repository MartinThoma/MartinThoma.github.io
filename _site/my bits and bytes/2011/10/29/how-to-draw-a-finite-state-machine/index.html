<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>How to draw a finite-state machine</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="site">
          <div class="header">
            <h1 class="title"><a href="/">Martin Thoma</a></h1>
            <a class="extra" href="/">home</a>
          </div>

          <h2>How to draw a finite-state machine</h2>
<p class="meta">29 Oct 2011</p>

<div class="post">
<p><a href="http://en.wikipedia.org/wiki/Deterministic_finite-state_machine">Finite-state machines</a> are necessary to show that some problems are computable (or not).</p>

<p>As I am currently learning something about them, I would like to be able to plot those finite automatons automatically. I will use <a href="http://www.graphviz.org/">graphviz</a>.</p>

<h2>Nondeterministic finite-state machine</h2>


<p>[caption id="attachment_8141" align="aligncenter" width="365" caption="Nondeterministic finite-state machine"]<a href="http://martin-thoma.com/wp-content/uploads/2011/10/myFiniteStateMachine1.png"><img class="size-full wp-image-8141 " title="Nondeterministic finite-state machine" src="http://martin-thoma.com/wp-content/uploads/2011/10/myFiniteStateMachine1.png" alt="Nondeterministic finite-state machine" width="365" height="119" /></a>[/caption]</p>

<p>This image is created from a gv-file. I saved it as fsm.gv:</p>

<p>[text]digraph finite_state_machine {
    rankdir=LR;
    size="8,5"</p>

<pre><code>node [shape = doublecircle]; S;
node [shape = point ]; qi

node [shape = circle];
qi -&gt; S;
S  -&gt; q1 [ label = "a" ];
S  -&gt; S  [ label = "a" ];
q1 -&gt; S  [ label = "a" ];
q1 -&gt; q2 [ label = "b" ];
q2 -&gt; q1 [ label = "b" ];
q2 -&gt; q2 [ label = "b" ];
</code></pre>

<p>}[/text]</p>

<p>To create a graph (or the picture of the nondeterministic finite-state machine) you have to enter the following command in Ubuntu Linux:</p>

<p>[bash]dot -Tpng fsm.gv -o myFiniteStateMachine.png[/bash]</p>

<h2>Deterministic finite-state machine</h2>


<p>[caption id="attachment_8171" align="alignleft" width="528" caption="Deterministic finite-state machine"]<a href="http://martin-thoma.com/wp-content/uploads/2011/10/deterministic-finite-state-machine.png"><img src="http://martin-thoma.com/wp-content/uploads/2011/10/deterministic-finite-state-machine.png" alt="Deterministic finite-state machine" title="Deterministic finite-state machine" width="528" height="248" class="size-full wp-image-8171" /></a>[/caption]</p>

<p>[text]digraph finite_state_machine {
    rankdir=LR;
    size="8,5"</p>

<pre><code>node [shape = doublecircle, label="{f}", fontsize=12] f;
node [shape = doublecircle, label="{q2, f}", fontsize=10] q2f;

node [shape = circle, label="S", fontsize=14] S;
node [shape = circle, label="{q1}", fontsize=12] q1;
node [shape = circle, label="{q2}", fontsize=12] q2;

node [shape = point ]; qi
qi -&gt; S;

S   -&gt; q1  [ label = "a" ];
S   -&gt; q2f [ label = "b" ];
S   -&gt; q2  [ label = "c" ];

q1  -&gt; q2  [ label = "b" ];

q2f -&gt; f   [ label = "b" ];
q2f -&gt; q2  [ label = "c" ];

q2  -&gt; f   [ label = "b" ];
q2  -&gt; q2  [ label = "c" ];
</code></pre>

<p>}[/text]</p>

<h2>LaTeX</h2>


<p>If you want to draw finite-state machines with LaTeX, you might want to give <a href="http://www.texample.net/tikz/examples/feature/automata-and-petri-nets/">tikz</a> a try.</p>

<p>This is the most minimalistic version I could create. It is equivalent to the nondeterministic finite-state machine I've described above:
[text]\documentclass{scrartcl}
\usepackage{tikz}
\usetikzlibrary{arrows,automata}</p>

<p>\begin{document}
\begin{tikzpicture}[>=stealth',shorten >=1pt,auto,node distance=2cm]
  \node[initial,state,accepting] (S)      {$S$};
  \node[state]         (q1) [right of=S]  {$q_1$};
  \node[state]         (q2) [right of=q1] {$q_2$};</p>

<p>  \path[->] (S)  edge [loop above] node {a} (S)
             edge              node {a} (q1)
        (q1) edge [bend left]  node {a} (S)
             edge              node {b} (q2)
        (q2) edge [loop above] node {b} (q2)
             edge [bend left]  node {b} (q1);
\end{tikzpicture}
\end{document}[/text]</p>

<p>This was the most basic example which shows how to draw a finite-state automaton with LaTeX. You can get it as a PDF with this command:
[bash]pdflatex latexsheet.tex -output-format=pdf[/bash]</p>

<p>If you want to see some more fancy stuff, take a look at this example of a non-deterministic finite state machine:
[caption id="attachment_13421" align="aligncenter" width="400" caption="Finite-state-machine with LaTeX"]<a href="http://martin-thoma.com/wp-content/uploads/2011/10/latex-finite-state-machine.png"><img src="http://martin-thoma.com/wp-content/uploads/2011/10/latex-finite-state-machine.png" alt="Finite-state-machine with LaTeX" title="Finite-state-machine with LaTeX" width="400" height="147" class="size-full wp-image-13421" /></a>[/caption]
[text]\documentclass{scrartcl}
\usepackage{tikz}
\usetikzlibrary{arrows,automata}</p>

<p>\begin{document}
\begin{tikzpicture}[>=stealth',shorten >=1pt,auto,node distance=2cm]
  \node[initial,state,accepting] (S)      {$S$};
  \node[state]         (q1) [right of=S]  {$q_1$};
  \node[state]         (q2) [right of=q1] {$q_2$};</p>

<p>  \path[->]          (S)  edge [loop above] node {a} (S);
  \path[->, dashed]  (S)  edge              node {a} (q1);
  \path[->, dotted]  (q1) edge [bend left]  node {a} (S);
  \path[->>, dotted] (q1) edge             node {b} (q2);
  \path              (q2) edge [loop above] node {b} (q2)
             edge [bend left]  node {b} (q1);
\end{tikzpicture}
\end{document}[/text]</p>

<h3>Markov models</h3>


<p>[text]
\documentclass{scrartcl}
\usepackage{tikz}
\usetikzlibrary{arrows,automata}</p>

<p>\begin{document}
\begin{tikzpicture}[->,>=stealth',shorten >=1pt,node distance=2.8cm]
    % When you want to use // inside of nodes, you have to algin
    \tikzstyle{every state}=[align=center]
    \node[state,initial,label=below:Start] (Start)
                                            {A 0.6\B 0.2\C 0.2};
    \node[state,label=below:Mitte] (Mitte) [right of=Start]
                                            {A 0.1\B 0.1\C 0.8};
    \node[state,label=below:Ende] (Ende)   [right of=Mitte]
                                            {A 0.5\B 0.2\C 0.3};
    \path (Start) edge               node[above] {0.2} (Mitte);
    \path (Mitte) edge               node[above] {0.8} (Ende);
    \path (Start) edge  [loop above] node        {0.8} (Start);
    \path (Mitte) edge  [loop above] node        {0.2} (Mitte);
    \path (Ende)  edge  [loop above] node        {1}  (Ende);
\end{tikzpicture}
\end{document}
[/text]</p>

<h2>Further Reading</h2>


<ul>
    <li><a href="http://www.graphviz.org/doc/info/shapes.html">DOT Node Shape reference</a></li>
    <li><a href="http://wiki.ubuntuusers.de/Graphviz">ubuntuusers.de</a> (German): Installation on Ubuntu</li>
    <li><a href="http://www.wikischool.de/wiki/WikiSchool:Graphviz">Wikischool.de</a> (German): Many examples</li>
</ul>



<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    processEscapes: true
  }
});
</script>
</div>

            <div class="footer">
    <div class="contact">
      <p>
        Martin<br />
        What You Are<br />
        you@example.com
      </p>
    </div>
    <div class="contact">
      <p>
        <a href="https://github.com/yourusername">github.com/yourusername</a><br />
        <a href="https://twitter.com/yourusername">twitter.com/yourusername</a><br />
      </p>
    </div>
  </div>

        </div>
    </body>
</html>
