<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Martin Thoma" />
        <meta name="copyright" content="Martin Thoma" />
        <link title = "Martin Thoma"
              type  = "application/opensearchdescription+xml"
              rel   = "search"
              href  = "../opensearch.xml">

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="software architecture, Code, " />

<meta property="og:title" content="Designing Event-Driven Systems in Local Python Applications "/>
<meta property="og:url" content="https://levelup.gitconnected.com/designing-event-driven-systems-in-local-python-applications-8abf7544d7e4" />
<meta property="og:description" content="An event-driven system decouples producers of events and the effects that those events should have on the remaining softwaresystem. An event-driven software architecture sometimes allows you to write cleaner code. Most software engineers likely know pre-defined event systems such as the ones given by frontend frameworks/languages, e.g. keypress …" />
<meta property="og:site_name" content="Martin Thoma" />
<meta property="og:article:author" content="Martin Thoma" />
<meta property="og:article:published_time" content="2024-01-24T20:00:00+01:00" />
<meta name="twitter:title" content="Designing Event-Driven Systems in Local Python Applications ">
<meta name="twitter:description" content="An event-driven system decouples producers of events and the effects that those events should have on the remaining softwaresystem. An event-driven software architecture sometimes allows you to write cleaner code. Most software engineers likely know pre-defined event systems such as the ones given by frontend frameworks/languages, e.g. keypress …">
<meta property="og:image" content="logos/star.png" />
<meta name="twitter:image" content="logos/star.png" >

        <title>Designing Event-Driven Systems in Local Python Applications  · Martin Thoma
</title>
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="../theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="../theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="../theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="../static/print.css" media="print">
        <link rel="stylesheet" type="text/css" href="../static/custom.css" media="screen">

        <!-- MathJax -->
<script type="text/x-mathjax-config">
<!--
MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [ ['$$', '$$'], ['\\[','\\]']],
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
    processEscapes: true
  }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
// -->
</script>
<script type="text/javascript" async
  src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

        <link href="https://martin-thoma.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Martin Thoma - Full Atom Feed" />
        <link href="https://martin-thoma.com/feeds/index.xml" type="application/rss+xml" rel="alternate" title="Martin Thoma - Full RSS Feed" />
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top navbar-default">
            <div class="container">
                <div class="container-fluid">
                    <div class="collapse navbar-collapse">
                        <ul class="nav pull-left top-menu navbar-nav">
                            <li><a href=".." style="font-family: 'Monaco', 'Inconsolata', 'Andale Mono', 'Lucida Console', 'Bitstream Vera Sans Mono', 'Courier New', Courier, Monospace;
                        font-size: 20px;" class="navbar-brand" tabindex="-1">Martin Thoma</a>
                            </li>
                        </ul>
                        <ul class="nav pull-right top-menu navbar-nav">
                            <li ><a href="..">Home</a></li>
                            <li ><a href="../categories.html">Categories</a></li>
                            <li ><a href="../tags.html">Tags</a></li>
                            <li ><a href="../archives.html">Archives</a></li>
                            <li><a href="../support-me/">Support me</a></li>
                            <li><form class="navbar-form" action="../search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="search" class="search-query form-control" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row">
                <div class="col-sm-1 col-md-1"></div>
                <div class="col-sm-10 col-md-10">
<!-- article.html -->
<article>
<div class="row">
    <header class="page-header col-sm-10 col-md-10 col-md-offset-2">
    <h1><a href="https://levelup.gitconnected.com/designing-event-driven-systems-in-local-python-applications-8abf7544d7e4">Designing Event-Driven Systems in Local Python Applications</a></h1>
    </header>
</div>

<div class="row">
    <div class="col-sm-2 col-md-2 table-of-content">
        <nav>
        <h4>Contents</h4>
        <div id="toc"><ul><li><a class="toc-href" href="#building-event-driven-software" title="Building Event-Driven Software">Building Event-Driven Software</a></li><li><a class="toc-href" href="#thats-simple-why-does-apache-kafka-exist" title="That&rsquo;s simple &mdash; why does Apache Kafka exist?">That&rsquo;s simple &mdash; why does Apache Kafka exist?</a></li><li><a class="toc-href" href="#gotcha-but-why-do-we-need-blinker" title="Gotcha, but why do we need blinker?">Gotcha, but why do we need blinker?</a></li><li><a class="toc-href" href="#terminology-many-words-for-the-same-concepts" title="Terminology &mdash; many words for the same concepts">Terminology &mdash; many words for the same concepts</a></li><li><a class="toc-href" href="#pitfalls-of-event-driven-systems" title="Pitfalls of Event-Driven Systems">Pitfalls of Event-Driven Systems</a></li><li><a class="toc-href" href="#tldr" title="TL;DR">TL;DR</a></li></ul></div>
        </nav>
    </div>
    <div class="col-sm-8 col-md-8 article-content" id="contentAfterTitle">

            
            <p><img alt="An event-driven system decouples producers of events and the effects that those events should have on the remaining softwaresystem." src="../images/2024/02/event-driven-software.png"/><em>An event-driven system decouples producers of events and the effects that those events should have on the remaining softwaresystem.</em></p>
<p>An event-driven software architecture sometimes allows you to write cleaner code. Most software engineers likely know pre-defined event systems such as the ones given by frontend frameworks/languages, e.g. <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/keypress_event">keypress in JavaScript</a>, <a href="https://www.geeksforgeeks.org/python-binding-function-in-tkinter/">bind in Tkinter</a>, or <a href="https://doc.qt.io/qtforpython-6/PySide6/QtGui/QKeyEvent.html#detailed-description">keyPressEvent in PyQt/PySide</a>. You might also know <a href="https://docs.djangoproject.com/en/5.0/topics/signals/">Django Signals</a>. You might have heard of Apache Kafka or Google Cloud Pub/Sub in the context of distributed systems.</p>
<p><strong>An event-driven software architecture does not have to be that complicated.</strong></p>
<p>The components of an event-driven system are simple: You have events, producers of those events, and consumers of the events. Then you need some glue code that forwards the events from the producers to the consumers. This is the event registry.</p>
<h2 id="building-event-driven-software">Building Event-Driven Software</h2>
<p>I&rsquo;m recently building the <a href="https://pypi.org/project/flitz/">flitz file manager</a> to tip my toes into the development of graphical user interfaces with Python. I started with the Tkinter framework but recognized it was not a good match. Porting to Qt is hard as I have a tight coupling with Tkinter.</p>
<p><img alt="A file explorer with an up-button, a URL bar showing the current path, and a details view showing the content of the current directory." src="../images/2024/02/flitz-file-explorer.png"/><em>A file explorer with an up-button, a URL bar showing the current path, and a details view showing the content of the current directory.</em></p>
<p>For example, when changing the current path via the URL bar, I want the listed documents to be changed. Flitz also has an &ldquo;up&rdquo; button. When it is clicked the current path shown in the URL bar is changed + the shown documents in the details pane are changed.</p>
<p>Conceptionally, the code could look like this:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">FileExplorer</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">current_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">"."</span><span class="p">)</span>

        <span class="c1"># Show the UI widgets</span>
        <span class="n">details_view</span> <span class="o">=</span> <span class="n">DetailsView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">url_bar</span> <span class="o">=</span> <span class="n">UrlBar</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">up_button</span> <span class="o">=</span> <span class="n">UpButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">UrlBar</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">root</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">current_path</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_keypress_enter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Let the main application know that the path changed</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">current_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

        <span class="c1"># Trigger follow-up changes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">details_view</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">current_path</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">UpButton</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">root</span>

    <span class="k">def</span> <span class="nf">on_press</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Let the main application know that the path changed</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">current_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">current_path</span><span class="o">.</span><span class="n">parent</span>

        <span class="c1"># Trigger follow-up changes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">details_view</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">url_bar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">DetailsView</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">refresh</span><span class="p">():</span>
<span class="w">        </span><span class="sd">"""Show the files from the root.current_path."""</span>
</code></pre></div>
<p>You can see that there is logic duplication in UpButton.on_press and UrlBar.on_keypress_enter . Such parts become harder to maintain the bigger the application becomes. At some point, somebody will forget to update/refresh one GUI widget of the application.</p>
<p>Instead, you can define an set_current_pathfunction:</p>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">FileExplorer</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">current_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">"."</span><span class="p">)</span>

        <span class="c1"># Show the UI widgets</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">details_view</span> <span class="o">=</span> <span class="n">DetailsView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url_bar</span> <span class="o">=</span> <span class="n">UrlBar</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">up_button</span> <span class="o">=</span> <span class="n">UpButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_current_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current_path</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_path</span> <span class="o">=</span> <span class="n">current_path</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">details_view</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url_bar</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">UrlBar</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">root</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">current_path</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_keypress_enter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">set_current_path</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>


<span class="k">class</span> <span class="nc">UpButton</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">root</span>

    <span class="k">def</span> <span class="nf">on_press</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">set_current_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">current_path</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">DetailsView</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">refresh</span><span class="p">():</span>
<span class="w">        </span><span class="sd">"""Show the files from the root.current_path."""</span>
</code></pre></div>
<p>The next part we want to improve is the <strong>locality of the code</strong>. Meaning, that one component should have all of its code in one place. Having several unrelated lines in set_current_path makes it harder to change those components and inspect if they do the right thing. I mean, how do you know if there is a component that should be touched in set_current_path without checking the code of every single component?</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="c1"># events.py</span>
<span class="k">class</span> <span class="nc">Event</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">listeners</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">consumed_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listener</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">listeners</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">listener</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">produce</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">listener</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">listeners</span><span class="p">:</span>
            <span class="n">listener</span><span class="p">()</span>


<span class="n">current_path_changed</span> <span class="o">=</span> <span class="n">Event</span><span class="p">(</span><span class="s2">"current_path_changed"</span><span class="p">)</span>

<span class="c1"># Remaining code:</span>
<span class="k">class</span> <span class="nc">FileExplorer</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">"."</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">event_registry</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># Event registry to hold component listeners</span>

        <span class="c1"># Show the UI widgets</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">details_view</span> <span class="o">=</span> <span class="n">DetailsView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url_bar</span> <span class="o">=</span> <span class="n">UrlBar</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">up_button</span> <span class="o">=</span> <span class="n">UpButton</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_current_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current_path</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_path</span> <span class="o">=</span> <span class="n">current_path</span>
        <span class="n">current_path_changed</span><span class="o">.</span><span class="n">produce</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">UrlBar</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">root</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">current_path</span><span class="p">)</span>
        <span class="n">current_path_changed</span><span class="o">.</span><span class="n">consumed_by</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_keypress_enter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">set_current_path</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">url_bar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">current_path</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"UrlBar refreshed"</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">UpButton</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">root</span>

    <span class="k">def</span> <span class="nf">on_press</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">set_current_path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">current_path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">resolve</span><span class="p">())</span>


<span class="k">class</span> <span class="nc">DetailsView</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">root</span>
        <span class="n">current_path_changed</span><span class="o">.</span><span class="n">consumed_by</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">"""Show the files from the root.current_path."""</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Refreshing details view with files from </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">current_path</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>


<span class="c1"># Example usage:</span>
<span class="n">explorer</span> <span class="o">=</span> <span class="n">FileExplorer</span><span class="p">()</span>
<span class="n">explorer</span><span class="o">.</span><span class="n">up_button</span><span class="o">.</span><span class="n">on_press</span><span class="p">()</span>
</code></pre></div>
<p>You can also use a library like <a href="https://pypi.org/project/blinker/">blinker</a> for that.</p>
<p><strong>And that&rsquo;s it. You&rsquo;ve seen an event-driven system 🎉</strong></p>
<p>In this case, the registry is every single Event object.</p>
<h2 id="thats-simple-why-does-apache-kafka-exist">That&rsquo;s simple &mdash; why does Apache Kafka exist?</h2>
<p>Kafka is used in large distributed systems. That especially means that you have a network with latency and errors. Consumers might come and go; just like producers.</p>
<h2 id="gotcha-but-why-do-we-need-blinker">Gotcha, but why do we need blinker?</h2>
<ul>
<li>
<p><strong>Multi-threading</strong></p>
</li>
<li>
<p><strong>Disconnecting Consumers</strong></p>
</li>
<li>
<p><strong>Attached data</strong>: In this simple example the event didn&rsquo;t come with any data. That is different in many use-cases.</p>
</li>
</ul>
<h2 id="terminology-many-words-for-the-same-concepts">Terminology &mdash; many words for the same concepts</h2>
<p>Events and signals are the same thing. Similarly, we have a couple of pairs that belong together:</p>
<table border="1">
<tr>
<th>Event</th>
<th>Action</th>
<th>Follow-up</th>
<th>Comment</th>
</tr>
<tr>
<td>Event</td>
<td>Publisher</td>
<td>Subscriber</td>
<td>Apache Kafka, Google Pub/Sub</td>
</tr>
<tr>
<td>Event</td>
<td>Producer</td>
<td>Consumer</td>
<td>RabbitMQ, Spring Cloud Stream</td>
</tr>
<tr>
<td>Event</td>
<td>Dispatch</td>
<td>Listener</td>
<td>JavaScript</td>
</tr>
<tr>
<td>Signal</td>
<td>Sender</td>
<td>Receiver</td>
<td>Blinker</td>
</tr>
</table>
<h2 id="pitfalls-of-event-driven-systems">Pitfalls of Event-Driven Systems</h2>
<ul>
<li>
<p><strong>Order</strong>: You should design your event-driven system in a way that the order of execution of the consumers does not matter.</p>
</li>
<li>
<p><strong>Infinite Loops</strong>: Event A might cause Event B which causes Event A.</p>
</li>
</ul>
<h2 id="tldr">TL;DR</h2>
<ul>
<li>
<p><strong>What</strong>: Event-driven systems have <strong>events</strong>, parts of code that <strong>produce</strong> those events, and other parts that <strong>consume</strong> those events.</p>
</li>
<li>
<p><strong>Why</strong>: It&rsquo;s useful to decouple the senders from the receivers. That increases maintainability.</p>
</li>
<li>
<p><strong>How</strong>: The simplest way to implement event-driven software is by using global objects for the signals. Those are then used by the producers and automatically call the consumers. Libraries like blinker can help. If you are in a distributed system things become more complicated.</p>
</li>
</ul>
            
        </div>
        <section>
        <div class="col-sm-2 col-md-2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2024-01-24T20:00:00+01:00">Jan 24, 2024</time>
            <br/>
            by <a rel="author" class="vcard author post-author" itemprop="author" href="../author/martin-thoma/"><span class="fn" itemscope="" itemtype="https://schema.org/Person"><span itemprop="name">Martin Thoma</span></span></a>
            <h4>Category</h4>
            <a class="category-link" href="../categories.html#code-ref">Code</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="../tags.html#software-architecture-ref">software architecture
                    <span>2</span>
</a></li>
            </ul>
<h4>Contact</h4>
    <a href="https://twitter.com/_martinthoma" title="My Twitter Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-twitter sidebar-social-links"></i></a>
    <a href="mailto:info@martin-thoma.de" title="My Email Address" class="sidebar-social-links" target="_blank">
    <i class="fa fa-envelope sidebar-social-links"></i></a>
    <a href="https://github.com/MartinThoma" title="My Github Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-github sidebar-social-links"></i></a>
    <a href="http://stackoverflow.com/users/562769/martin-thoma" title="My Stackoverflow Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-stackoverflow sidebar-social-links"></i></a>
        </div>
        </section>
</div>
</article>
                </div>
                <div class="col-sm-1 col-md-1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
<footer class="no-print">
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-subtitle"><span class="site-name">Martin Thoma</span> - A blog about Code, the Web and Cyberculture</li>
        <li><a href="https://martin-thoma.com/email-subscription">E-mail subscription</a></li>
        <li><a href="https://martin-thoma.com/feeds/index.xml">RSS-Feed</a></li>
        <li><a href="http://www.martin-thoma.de/privacy.htm">Privacy/Datenschutzerkl&auml;rung</a></li>
        <li><a href="http://www.martin-thoma.de/impressum.htm">Impressum</a></li>
        <li class="elegant-power">Powered by
            <a href="https://blog.getpelican.com/" title="Pelican Home Page" tabindex="-1">Pelican</a>.
            Theme: <a href="https://elegant.oncrashreboot.com" title="Theme Elegant Home Page" tabindex="-1">Elegant</a>
            by <a href="https://www.oncrashreboot.com/" title="Talha Mansoor Home Page" tabindex="-1">Talha Mansoor</a></li>
    </ul>
</div>
</footer>        <script src="//code.jquery.com/jquery.min.js"></script>
        <!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>
        <script>
(function(){
    'use strict';

    /*
    Create intra-page links
    Requires that your headings already have an `id` attribute set
    For every heading in your page, this adds a little anchor link `#` that you can click to get a permalink to the heading.
    Ignores `h1`, because you should only have one per page.
    The text content of the tag is used to generate the link, so it will fail "gracefully-ish" if you have duplicate heading text.

    Credit: https://gist.github.com/SimplGy/a229d25cdb19d7f21231
     */

    var headingNodes = [], results, link,
        tags = ['h2', 'h3', 'h4', 'h5', 'h6'];

    tags.forEach(function(tag){
        var contentTag = document.getElementById('contentAfterTitle');
      results = contentTag.getElementsByTagName(tag);
      Array.prototype.push.apply(headingNodes, results);
    });

    headingNodes.forEach(function(node){
      link = document.createElement('a');
      link.className = 'deepLink';
      link.textContent = ' ¶';
      link.href = '#' + node.getAttribute('id');
      node.appendChild(link);
    });

  })();
</script>
    </body>
    <!-- Theme: Elegant built for Pelican
    License : https://elegant.oncrashreboot.com -->
</html>