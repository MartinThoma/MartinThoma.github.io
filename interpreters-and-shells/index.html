<!doctype html>
<html lang="en">
  <!-- type: head.html -->
  <head>
    <meta charset="utf-8">
    
    

    
        <meta name="thumbnail" content="//martin-thoma.com/images/2011/09/Gnome-Terminal.png" />
        <meta property="og:image" content="//martin-thoma.com/images/2011/09/Gnome-Terminal.png" />
    

    <meta property="og:type" content="blog"/>

    <title>Interpreters and Shells</title>
    <link rel="stylesheet" href="//martin-thoma.com/css/screen.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="//martin-thoma.com/css/style.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="//martin-thoma.com/css/pygments.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="//martin-thoma.com/css/tocplus-screen.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="//martin-thoma.com/css/print.css" type="text/css" media="print" />
    <link rel="stylesheet" href="//martin-thoma.com/css/handheld.css" type="text/css" media="only screen and (max-device-width: 480px)" />

    <link rel="alternate" type="application/rss+xml" title="Martin Thoma RSS Feed" href="//martin-thoma.com/feed/" /><!--TODO-->
    <link rel="shortcut icon" href="//martin-thoma.com/favicon.ico" type="image/x-icon" />

    <link rel="canonical" href="//martin-thoma.com/interpreters-and-shells" />
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Interpreters and Shells"
        ,"datePublished": "2014-03-08T11:49:00+01:00"
        
      }
    </script>
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:site" content="@themoosemind"/>
<meta name="twitter:creator" content="@themoosemind"/>
<meta name="twitter:title" content="Interpreters and Shells"/>

    <meta name="twitter:description" content="A blog about Code, the Web and Cyberculture" />


    <meta name="twitter:image" content="//martin-thoma.com/images/2011/09/Gnome-Terminal.png"/>



<meta name="twitter:url" content="//martin-thoma.com/interpreters-and-shells"/>
<meta name="twitter:domain" content="Martin Thoma.com"/>


    <script type='text/javascript' src="//martin-thoma.com/js/jquery.js"></script>
    <script type='text/javascript' src="//martin-thoma.com/js/jquery-migrate.min.js"></script>
    <style type="text/css">div#toc_container {width: 275px;}</style>
    <style type="text/css" id="syntaxhighlighteranchor"></style>

<!-- MathJax -->
<script type="text/x-mathjax-config">
<!--
MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [ ['$$', '$$'], ['\\[','\\]']],
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
    processEscapes: true
  }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
// -->
</script>
<script type="text/javascript" async
  src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<!-- Latest compiled and minified CSS bootstrap -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
</head>

<!-- type: post.html -->
<body>
    <div id="wrapper">
        <div id="container" class="container">
            <div class="span-16">
                <!-- type: header.html -->
<div id="header" role="banner">
    <h1><a href="//martin-thoma.com">Martin Thoma</a></h1>
    <h2 style="margin-top: 0;">A blog about Code, the Web and Cyberculture.</h2>
</div>
<nav class="navcontainer" role="navigation">
    <ul id="nav">
        <li class=""><a href="//martin-thoma.com">Home</a></li>
        <li class="page_item page-item-41 "><a href="//martin-thoma.com/author/martin-thoma/">About Me</a></li>
        <li class="page_item page-item-91 "><a href="//martin-thoma.com/imprint/">Imprint</a></li>
    </ul>
</nav>

                <div id="content">
                    <article class="post type-post format-standard hentry clearfix ">
                        <h2 class="title entry-title">Interpreters and Shells</h2>
                        <div class="postdate entry-date">
                            <time datetime="2014-03-08T11:49:00+01:00">
                                March
                                8th,
                                  
                                2014
                            </time>
                        </div>

                        <div class="entry" id="contentAfterTitle">
                            <p>Should you ever be in the position to write a shell or interpreter I hope you
will make sure the following things work. Take it as a quality guide. They
are ordered by level of importance. The first thing is the most basic one that
has to work, the last one is less necessary, but much cooler if you support it.</p>

<p>In the following, I’ll only talk about shells. But most of it will also apply 
to interpreters.</p>

<div id="toc_container" class="toc_light_blue no_bullets">
   <p class="toc_title">Contents</p>
   <ul class="toc_list">
      <li class="toc_level-1 toc_section-1">
         <a href="#tocAnchor-1-1"><span class="tocnumber">1</span> <span class="toctext">Level 0: Robustness</span></a>
      </li>
      <li class="toc_level-1 toc_section-2">
         <a href="#tocAnchor-1-2"><span class="tocnumber">2</span> <span class="toctext">Level 1: Speed</span></a>
      </li>
      <li class="toc_level-1 toc_section-3">
         <a href="#tocAnchor-1-3"><span class="tocnumber">3</span> <span class="toctext">Level 2: Left / Right arrow keys</span></a>
      </li>
      <li class="toc_level-1 toc_section-4">
         <a href="#tocAnchor-1-4"><span class="tocnumber">4</span> <span class="toctext">Level 3: History with up / down arrow keys</span></a>
      </li>
      <li class="toc_level-1 toc_section-5">
         <a href="#tocAnchor-1-5"><span class="tocnumber">5</span> <span class="toctext">Level 4: Customization</span></a>
      </li>
      <li class="toc_level-1 toc_section-6">
         <a href="#tocAnchor-1-6"><span class="tocnumber">6</span> <span class="toctext">Level 5: Path autocompletion</span></a>
      </li>
      <li class="toc_level-1 toc_section-7">
         <a href="#tocAnchor-1-7"><span class="tocnumber">7</span> <span class="toctext">Level 6: Command autocompletion</span></a>
      </li>
      <li class="toc_level-1 toc_section-8">
         <a href="#tocAnchor-1-8"><span class="tocnumber">8</span> <span class="toctext">Level 7: Fuzzy autocompletion</span></a>
      </li>
      <li class="toc_level-1 toc_section-9">
         <a href="#tocAnchor-1-9"><span class="tocnumber">9</span> <span class="toctext">Additional stuff</span></a>
      </li>
      <li class="toc_level-1 toc_section-10">
         <a href="#tocAnchor-1-10"><span class="tocnumber">10</span> <span class="toctext">Ranking</span></a>
      </li>
      <li class="toc_level-1 toc_section-11">
         <a href="#tocAnchor-1-11"><span class="tocnumber">11</span> <span class="toctext">Additional resources</span></a>
      </li>
   </ul>
</div><h2 id="tocAnchor-1-1">Level 0: Robustness</h2>
<p>A shell has to be robust. Users rely on it when GUI doesn’t work. This means
it should definitely not fail. Never.</p>

<p>And just to make sure that you get me correct. Commands get “Entered”. So the
user pushes “enter” when he wants something to happen. Everything the shell does
meanwhile should not change the system (except for shell-related stuff) and not
be able to slow down / crash the system.</p>

<h2 id="tocAnchor-1-2">Level 1: Speed</h2>
<p>I expect a shell to start without recognizable delay. I’m not too sure how fast ‘without recognizable delay’ means. In the most extreme case it would be about 1/100 of a second, because when monitors have 100Hz they are said to be flicker free. You could not even see that. But I think it is not necessary.</p>

<p>Another measure would be reaction time. I’ve just did an online test and saw that
my reaction time is about 0.2 seconds. So a shell should be ready for user input
after this time.</p>

<h2 id="tocAnchor-1-3">Level 2: Left / Right arrow keys</h2>
<p>When I enter a command, it happens that I forget something. In this case I want
to be able to navigate with left / right arrow keys through the console.</p>

<h2 id="tocAnchor-1-4">Level 3: History with up / down arrow keys</h2>
<p>When you use the up-array, you should get the last command you’ve entered.
When you press it twice, you get the second last command…
So the shell should save your last commands in a so called “history”. This 
history should be at least</p>

<h2 id="tocAnchor-1-5">Level 4: Customization</h2>
<ul>
  <li>Promt</li>
  <li>History length</li>
</ul>

<h2 id="tocAnchor-1-6">Level 5: Path autocompletion</h2>
<p>The path should autocomplete when you hit <kbd>Tab</kbd>. The autocomplete should
work as follows:</p>

<ol>
  <li>The autocomplete should never get farer than one folder.</li>
  <li>If there are multiple possibilities to autocomplete, then it should only
  autocomplete what is in common. After a second <kbd>Tab</kbd> it should display
  the possibilities and after a third <kbd>Tab</kbd> the shell should go to the
  first possibility so that you can hit enter to use this possibility.</li>
</ol>

<h2 id="tocAnchor-1-7">Level 6: Command autocompletion</h2>
<p>The autocomplete function should also complete commands.</p>

<h2 id="tocAnchor-1-8">Level 7: Fuzzy autocompletion</h2>
<p>When you make a typo in a path and hit <kbd>Tab</kbd> the shell should correct
the typo if possible.</p>

<h2 id="tocAnchor-1-9">Additional stuff</h2>
<p>Some stuff is nice to have, but not really essential:</p>

<ul>
  <li>Some default commands like <code>help</code>, <code>time</code>, <code>pwd</code>, <code>cd</code> and <code>echo</code>.</li>
  <li><kbd>Ctrl</kbd> + <kbd>D</kbd> as a shortcut for exiting.</li>
  <li><kbd>Ctrl</kbd> + <kbd>C</kbd> should stop the current command.</li>
  <li>The configuration file should be stored in the home folder of the user and it should be called <code>.[name]rc</code>. The dot makes the file invisible by convention and ‘rc’ means ‘resource configuration’.</li>
  <li>The prompt configuration should be easy. Some patterns that are used quite often are
    <ul>
      <li><code>\w</code> for the working directory, where ``$HOME<code> gets abbreviated with </code>~`</li>
      <li><code>\u</code> the username</li>
      <li><code>\h</code> the hostname</li>
      <li>Using colors for different parts</li>
    </ul>
  </li>
  <li>Navigation with <kbd>Pos 1</kbd> and <kbd>End</kbd> should work.</li>
</ul>

<h2 id="tocAnchor-1-10">Ranking</h2>
<p>Here is how some shells rank. Please note, that it’s very difficult to check
if a shell is robust. :</p>

<p><strong>Level 0</strong>: Windows XP / Windows 7 default shell; Windows Power shell<br />
The shell is too slow. I don’t know if this is still a problem in Windows 8, but
I guess so.</p>

<p>The <code>scala</code> interactive interpreter is slow.</p>

<p><strong>Level 1</strong>: <code>csh</code> prints “^[[D” when I press the left arrow and “^[[C” when 
I press the right arrow. When I press <kbd>Tab</kbd> it only prints tab. What
a crap.</p>

<p><strong>Level 3</strong>: <code>python</code> seems to have possibilities to execute arbitrary python code at
startup by specifying the environment variable <code>PYTHONSTARTUP</code>, but somehow this
does not work on my system.<br />
However, customizing the prompt is fairly easy:</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">sys</span>
sys.ps1 = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">--&gt;</span><span style="color:#710">"</span></span>
</pre></div>
</div>
</div>

<p><strong>Level 4</strong>: <code>GHCi</code>, a Haskell compiler, has mastered level 4. The prompt can be
configured via <code>~/.ghci</code> by adding <code>:set prompt "ghci&gt; "</code>.</p>

<p>If you want to show the current path, you can do it like this (<a href="http://stackoverflow.com/a/11263118/562769">source</a>):</p>

<div class="highlighter-coderay"><div class="CodeRay">
  <div class="code"><pre>let cur fill = do { cwd &lt;- System.Directory.getCurrentDirectory; return (":set prompt \"" ++ cwd ++ fill ++ " \""); }
:def doprompt (\_ -&gt; cur "&gt;")
:def mycd (\dir -&gt; System.Directory.setCurrentDirectory dir &gt;&gt; cur "&gt;")
:doprompt
</pre></div>
</div>
</div>

<p><strong>Level 4.5</strong>: <code>bash</code> is robust, takes about 0.11 seconds to start, has a history of 
500 lines as you can verify with <code>echo $</code>HISTSIZE<code>, is customizable with </code>.bashrc`.</p>

<p><code>tcsh</code> takes about 0.02 seconds to start, has a default history size of 100 lines
as you can verify with <code>echo $history</code>, is customizable with <code>.tcshrc</code> and <code>.cshrc</code>.</p>

<p>Rubys interactive interpreter <code>irb</code> seems to be fast enough, has a history,
the prompt can be configured in <code>~/.riplrc</code> (<a href="http://stackoverflow.com/a/6097629/562769">source</a>). I don’t know if the history length is limited and can be adjusted.</p>

<p>All shells in this level have path autocompletion as described in 5.1, but do not have autocompletion as described in 5.2.</p>

<p><strong>Level 7</strong>: ZSH is the best shell I have ever used. Especially with <a href="https://github.com/robbyrussell/oh-my-zsh">oh-my-zsh</a>.</p>

<h2 id="tocAnchor-1-11">Additional resources</h2>
<ul>
  <li><a href="http://www.understudy.net/custom.html">How to change your shell prompt</a>:
A list of files and commands that might be useful.</li>
</ul>

                        </div>
                        <div class="postmeta">Posted in
                            
                                <a href="//martin-thoma.com/category/code/">code</a><!--TODO: Displayed category name should be upper case! -->
                             | Tags:
                            
                                
                                    <a href="//martin-thoma.com/tag/shell/">Shell</a>
                                
                             by <a rel="author" class="vcard author" href="//martin-thoma.com/author/martin-thoma/"><span class="fn">Martin Thoma</span></a> on <span class="updated"><span class="value-title" title="2014-03-08 11:49:00 +0100">
                                March
                                8th
                                  ,
                                2014</span></span></div>

                            <div class="navigation clearfix">
                                <div class="alignleft">
                                
                                    &laquo; <a href="//martin-thoma.com/internet-at-kit/" rel="prev">Internet at KIT</a>
                                
                                </div>
                                <div class="alignright">
                                
                                    <a href="//martin-thoma.com/sublime-via-ssh/" rel="next">How to use Sublime Text via SSH</a> &raquo;
                                
                                </div>
                            </div>

                        </article>
                        <div id="respond">
                            <h3>Leave a Reply</h3>
                                <!-- comment discuss code -->
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'martinthoma'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="//disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    <!-- comment discuss code -->

                        </div>
                    </div>
                </div>
            <div class="span-8 last">
                <div id="subscriptions">
<a href="//martin-thoma.com/feed/"><img src="//martin-thoma.com/css/images/rss.png" alt="Subscribe to RSS Feed" title="Subscribe to RSS Feed" width="72" height="47" /></a>		
<a href="https://twitter.com/#!/themoosemind" title="Follow me on Twitter!"><img src="//martin-thoma.com/css/images/twitter.png" title="Follow me on Twitter!" alt="Follow me on Twitter!"  width="76" height="47" /></a>
</div>

                <div id="sidebar">
                <!-- type: searchbox.html - TODO-->
<ul>
    <li id="search">
        <div class="searchlayout">
            <form method="get" id="searchform" action="//google.com/cse" role="search">
                <input type="hidden" name="cx" value="017345337424948206369:qrnnnentkkk" />
                <input type="search" value="" name="q" id="s" placeholder="Search with Google"/>
                <input type="image" src="//martin-thoma.com/css/images/search.gif" style="border:0; vertical-align: top;" alt="search"/> 
            </form>
        </div>
    </li>
</ul>

                <div class="addthis_toolbox">   
    <div class="custom_images">
            <a href="//twitter.com/share?url=//martin-thoma.com/interpreters-and-shells&amp;hashtags=shell,&amp;via=themoosemind" target="_blank"><img src="//martin-thoma.com/css/images/socialicons/twitter.png" width="32" height="32" alt="Twitter" /></a>
            <a href="//del.icio.us/post?url=//martin-thoma.com/interpreters-and-shells&amp;title=Interpreters%20and%20Shells" target="_blank"><img src="//martin-thoma.com/css/images/socialicons/delicious.png" width="32" height="32" alt="Delicious" /></a>
            <a href="//www.facebook.com/sharer.php?u=//martin-thoma.com/interpreters-and-shells" target="_blank"><img src="//martin-thoma.com/css/images/socialicons/facebook.png" width="32" height="32" alt="Facebook" /></a>
            <a href="//digg.com/submit?phase=2&amp;url=//martin-thoma.com/interpreters-and-shells&amp;title=Interpreters%20and%20Shells" target="_blank"><img src="//martin-thoma.com/css/images/socialicons/digg.png" width="32" height="32" alt="Digg" /></a>
            <a href="//www.stumbleupon.com/submit?url=//martin-thoma.com/interpreters-and-shells&amp;title=Interpreters%20and%20Shells" target="_blank"><img src="//martin-thoma.com/css/images/socialicons/stumbleupon.png" width="32" height="32" alt="Stumbleupon" /></a>
            <a href="//plusone.google.com/_/+1/confirm?hl=en&amp;url=//martin-thoma.com/interpreters-and-shells" target="_blank"><img src="//martin-thoma.com/css/images/socialicons/gplus.png" width="32" height="32" alt="Google Plus" /></a>
            <a href="//reddit.com/submit?url=//martin-thoma.com/interpreters-and-shells&amp;title=Interpreters%20and%20Shells" target="_blank"><img src="//martin-thoma.com/css/images/socialicons/reddit.png" width="32" height="32" alt="Reddit" /></a>
    </div>
</div>

                <ul>
                    <li id="categories-3" class="widget widget_categories">
                        <!-- type: categories -->
<h2 class="widgettitle">Categories</h2>
    <ul>
        <li class="cat-item cat-item-11"><a href="//martin-thoma.com/category/code/" title="Tipps for coding in different languages like Python oder C++.">Code</a></li>
        <li class="cat-item cat-item-21"><a href="//martin-thoma.com/category/web/" title="New emerging websites and technologies.">The Web</a></li>
        <li class="cat-item cat-item-31"><a href="//martin-thoma.com/category/cyberculture/" title="Lolcats, planking, Trollfaces, ...">Cyberculture</a></li>
        <li class="cat-item cat-item-3404"><a href="//martin-thoma.com/category/maths/" title="View all posts filed under Mathematics">Mathematics</a></li>
        <li class="cat-item cat-item-881"><a href="//martin-thoma.com/category/bits-and-bytes/" title="Sometimes posts don&#039;t fit in any category.">My bits and bytes</a></li>
        <li class="cat-item cat-item-41"><a href="//martin-thoma.com/category/deutschland/" title="[All Posts here are written in German about German topics] - Die Bahn, unsere Politik und Europa.">German posts</a></li>
	</ul>

                    </li>
                </ul>
                </div>
            </div>
        </div><!--/container-->
            <footer id="footer">
                <a href="//martin-thoma.com"><strong>Martin Thoma</strong></a> -  A blog about Code, the Web and Cyberculture. <br />
                <div class="footer-credits">
                    <a href="http://flexithemes.com/themes/modern-style/">Modern Style</a> theme by <a href="http://flexithemes.com/">FlexiThemes</a>
                </div>
            </footer><!--/footer-->

    </div><!--/wrapper-->
<!-- type: footer -->
<!-- TOC Plus -->
<script type='text/javascript'>
/* <![CDATA[ */
var tocplus = {"visibility_show":"show","visibility_hide":"hide","width":"275px"};
/* ]]> */
</script>
<script type='text/javascript' src="//martin-thoma.com/js/tocplus-front.js"></script>
<script>
(function(){
    'use strict';

    /*
    Create intra-page links
    Requires that your headings already have an `id` attribute set (because that's what jekyll does)
    For every heading in your page, this adds a little anchor link `#` that you can click to get a permalink to the heading.
    Ignores `h1`, because you should only have one per page.
    The text content of the tag is used to generate the link, so it will fail "gracefully-ish" if you have duplicate heading text.

    Credit: https://gist.github.com/SimplGy/a229d25cdb19d7f21231
     */

    var headingNodes = [], results, link,
        tags = ['h2', 'h3', 'h4', 'h5', 'h6'];

    tags.forEach(function(tag){
        var contentTag = document.getElementById('contentAfterTitle');
      results = contentTag.getElementsByTagName(tag);
      Array.prototype.push.apply(headingNodes, results);
    });

    headingNodes.forEach(function(node){
      link = document.createElement('a');
      link.className = 'deepLink';
      link.textContent = ' ¶';
      link.href = '#' + node.getAttribute('id');
      node.appendChild(link);
    });

  })();
</script>
</body>
</html>

