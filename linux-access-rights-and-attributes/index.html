<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Martin Thoma" />
        <meta name="copyright" content="Martin Thoma" />
        <link title = "Martin Thoma"
              type  = "application/opensearchdescription+xml"
              rel   = "search"
              href  = "../opensearch.xml">

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="Linux, IT-Security, gedit, Bug, Cyberculture, " />

<meta property="og:title" content="Linux access rights and attributes "/>
<meta property="og:url" content="linux-access-rights-and-attributes/" />
<meta property="og:description" content="RWX Files Linux files have three important access rights for files: Read Write Execute If you want to mark a file as executable, you can add the x-right: chmod +x When you want to mark a file as readable, you can dd the r-right: chmod +r …" />
<meta property="og:site_name" content="Martin Thoma" />
<meta property="og:article:author" content="Martin Thoma" />
<meta property="og:article:published_time" content="2013-03-04T22:29:42+01:00" />
<meta name="twitter:title" content="Linux access rights and attributes ">
<meta name="twitter:description" content="RWX Files Linux files have three important access rights for files: Read Write Execute If you want to mark a file as executable, you can add the x-right: chmod +x When you want to mark a file as readable, you can dd the r-right: chmod +r …">

        <title>Linux access rights and attributes  · Martin Thoma
</title>
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.1/css/font-awesome.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="../theme/css/pygments.css" media="screen">
        <link rel="stylesheet" type="text/css" href="../theme/tipuesearch/tipuesearch.css" media="screen">
        <link rel="stylesheet" type="text/css" href="../theme/css/elegant.css" media="screen">
        <link rel="stylesheet" type="text/css" href="../static/print.css" media="print">
        <link rel="stylesheet" type="text/css" href="../static/custom.css" media="screen">

        <!-- MathJax -->
<script type="text/x-mathjax-config">
<!--
MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [ ['$$', '$$'], ['\\[','\\]']],
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
    processEscapes: true
  }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
// -->
</script>
<script type="text/javascript" async
  src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

        <link href="https://martin-thoma.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Martin Thoma - Full Atom Feed" />
        <link href="https://martin-thoma.com/feeds/index.xml" type="application/rss+xml" rel="alternate" title="Martin Thoma - Full RSS Feed" />
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top navbar-default">
            <div class="container">
                <div class="container-fluid">
                    <div class="collapse navbar-collapse">
                        <ul class="nav pull-left top-menu navbar-nav">
                            <li><a href=".." style="font-family: 'Monaco', 'Inconsolata', 'Andale Mono', 'Lucida Console', 'Bitstream Vera Sans Mono', 'Courier New', Courier, Monospace;
                        font-size: 20px;" class="navbar-brand" tabindex="-1">Martin Thoma</a>
                            </li>
                        </ul>
                        <ul class="nav pull-right top-menu navbar-nav">
                            <li ><a href="..">Home</a></li>
                            <li ><a href="../categories.html">Categories</a></li>
                            <li ><a href="../tags.html">Tags</a></li>
                            <li ><a href="../archives.html">Archives</a></li>
                            <li><a href="../support-me/">Support me</a></li>
                            <li><form class="navbar-form" action="../search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="search" class="search-query form-control" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row">
                <div class="col-sm-1 col-md-1"></div>
                <div class="col-sm-10 col-md-10">
<!-- article.html -->
<article>
<div class="row">
    <header class="page-header col-sm-10 col-md-10 col-md-offset-2">
    <h1><a href="../linux-access-rights-and-attributes/">Linux access rights and attributes</a></h1>
    </header>
</div>

<div class="row">
    <div class="col-sm-2 col-md-2 table-of-content">
        <nav>
        <h4>Contents</h4>
        <div id="toc"><ul><li><a class="toc-href" href="#rwx" title="RWX">RWX</a><ul><li><a class="toc-href" href="#files" title="Files">Files</a></li><li><a class="toc-href" href="#folders" title="Folders">Folders</a></li></ul></li><li><a class="toc-href" href="#user-group-others_1" title="User, Group, Others">User, Group, Others</a></li><li><a class="toc-href" href="#suid-sgid-sticky-bit" title="SUID, SGID, Sticky Bit">SUID, SGID, Sticky Bit</a><ul><li><a class="toc-href" href="#files_1" title="Files">Files</a></li><li><a class="toc-href" href="#folders_1" title="Folders">Folders</a></li></ul></li><li><a class="toc-href" href="#type_1" title="Type">Type</a></li><li><a class="toc-href" href="#stat" title="stat">stat</a></li><li><a class="toc-href" href="#attributes" title="Attributes">Attributes</a><ul><li><a class="toc-href" href="#version" title="Version">Version</a></li><li><a class="toc-href" href="#append-only" title="Append only">Append only</a></li><li><a class="toc-href" href="#immutable" title="Immutable">Immutable</a></li><li><a class="toc-href" href="#secure-deletion-and-undeletable" title="Secure deletion and undeletable">Secure deletion and undeletable</a></li><li><a class="toc-href" href="#synchronous-update" title="Synchronous update">Synchronous update</a></li></ul></li></ul></div>
        </nav>
    </div>
    <div class="col-sm-8 col-md-8 article-content" id="contentAfterTitle">

            
            <h2 id="rwx">RWX</h2>
<h3 id="files">Files</h3>
<p>Linux files have three important access rights for files:</p>
<ul>
<li><strong>R</strong>ead</li>
<li><strong>W</strong>rite</li>
<li>E<strong>x</strong>ecute</li>
</ul>
<p>If you want to mark a file as executable, you can add the x-right:</p>
<div class="highlight"><pre><span></span><code>chmod<span class="w"> </span>+x
</code></pre></div>
<p>When you want to mark a file as readable, you can dd the r-right:</p>
<div class="highlight"><pre><span></span><code>chmod<span class="w"> </span>+r
</code></pre></div>
<p>You can remove rights in a similar way:</p>
<div class="highlight"><pre><span></span><code>chmod<span class="w"> </span>-x<span class="w"> </span>testfile
</code></pre></div>
<p>Now, often this is expressed numerically. Three bits determine if the file is readable (4), writable (2) or executable (1). Did you notice that all of them are powers of two?</p>
<h3 id="folders">Folders</h3>
<p>rwx has a meaning for folders, too:</p>
<ul>
<li><strong>R</strong>ead: if that is missing, you can't use <code>ls</code> in the directory.</li>
<li><strong>W</strong>rite: you need this to create new files / folders in the direcotry</li>
<li><strong>x</strong> ... like "enter"?: if that is missing, you can't enter the directory.</li>
</ul>
<h2 id="user-group-others_1">User, Group, Others</h2>
<p>The rights above can be set for the user who created the file (sometimes also called the owner). Then the group that owns the file and all others. This is the reason why you have three times the rights from above:</p>
<div class="highlight"><pre><span></span><code>moose@pc07:~/Downloads$<span class="w"> </span>ls<span class="w"> </span>-l
total<span class="w"> </span><span class="m">29624</span>
drwxr-xr-x<span class="w">  </span><span class="m">8</span><span class="w"> </span>moose<span class="w"> </span>moose<span class="w">     </span><span class="m">4096</span><span class="w"> </span><span class="m">2013</span>-02-22<span class="w"> </span><span class="m">14</span>:18<span class="w"> </span>algorithms
-rw-r--r--<span class="w">  </span><span class="m">1</span><span class="w"> </span>moose<span class="w"> </span>moose<span class="w">    </span><span class="m">60058</span><span class="w"> </span><span class="m">2013</span>-02-11<span class="w"> </span><span class="m">08</span>:00<span class="w"> </span>args4j-2.0.21.jar
drwxr-xr-x<span class="w">  </span><span class="m">6</span><span class="w"> </span>moose<span class="w"> </span>moose<span class="w">     </span><span class="m">4096</span><span class="w"> </span><span class="m">2013</span>-02-25<span class="w"> </span><span class="m">20</span>:07<span class="w"> </span>bwinf
-rw-r--r--<span class="w">  </span><span class="m">1</span><span class="w"> </span>moose<span class="w"> </span>moose<span class="w"> </span><span class="m">22160041</span><span class="w"> </span><span class="m">2013</span>-02-05<span class="w"> </span><span class="m">16</span>:45<span class="w"> </span>DT2012.zip
drwxr-xr-x<span class="w">  </span><span class="m">8</span><span class="w"> </span>moose<span class="w"> </span>moose<span class="w">     </span><span class="m">4096</span><span class="w"> </span><span class="m">2013</span>-02-28<span class="w"> </span><span class="m">19</span>:23<span class="w"> </span>graphentheorie
-rw-r--r--<span class="w">  </span><span class="m">1</span><span class="w"> </span>moose<span class="w"> </span>moose<span class="w">  </span><span class="m">2164878</span><span class="w"> </span><span class="m">2013</span>-02-22<span class="w"> </span><span class="m">12</span>:38<span class="w"> </span>guava-14.0-rc1.jar
-rw-r--r--<span class="w">  </span><span class="m">1</span><span class="w"> </span>moose<span class="w"> </span>moose<span class="w">  </span><span class="m">2705344</span><span class="w"> </span><span class="m">2013</span>-03-01<span class="w"> </span><span class="m">21</span>:07<span class="w"> </span>HardVacuum.zip
drwxr-xr-x<span class="w">  </span><span class="m">8</span><span class="w"> </span>moose<span class="w"> </span>moose<span class="w">     </span><span class="m">4096</span><span class="w"> </span><span class="m">2013</span>-02-05<span class="w"> </span><span class="m">16</span>:38<span class="w"> </span>informatik-2011
-rw-r--r--<span class="w">  </span><span class="m">1</span><span class="w"> </span>moose<span class="w"> </span>moose<span class="w">   </span><span class="m">111926</span><span class="w"> </span><span class="m">2013</span>-02-24<span class="w"> </span><span class="m">19</span>:09<span class="w"> </span>Jim_Keener_resume.pdf
drwxr-xr-x<span class="w">  </span><span class="m">2</span><span class="w"> </span>moose<span class="w"> </span>moose<span class="w">     </span><span class="m">4096</span><span class="w"> </span><span class="m">2011</span>-11-08<span class="w"> </span><span class="m">11</span>:50<span class="w"> </span>juniper_linux
-rw-r--r--<span class="w">  </span><span class="m">1</span><span class="w"> </span>moose<span class="w"> </span>moose<span class="w">   </span><span class="m">288666</span><span class="w"> </span><span class="m">2012</span>-12-04<span class="w"> </span><span class="m">11</span>:38<span class="w"> </span>junit-4.11.jar
drwxr-xr-x<span class="w"> </span><span class="m">13</span><span class="w"> </span>moose<span class="w"> </span>moose<span class="w">     </span><span class="m">4096</span><span class="w"> </span><span class="m">2013</span>-02-01<span class="w"> </span><span class="m">23</span>:33<span class="w"> </span>LaTeX-examples
drwxr-xr-x<span class="w">  </span><span class="m">2</span><span class="w"> </span>moose<span class="w"> </span>moose<span class="w">     </span><span class="m">4096</span><span class="w"> </span><span class="m">2009</span>-08-11<span class="w"> </span><span class="m">17</span>:04<span class="w"> </span>otrdecoder
-rw-r--r--<span class="w">  </span><span class="m">1</span><span class="w"> </span>moose<span class="w"> </span>moose<span class="w">   </span><span class="m">728292</span><span class="w"> </span><span class="m">2013</span>-03-01<span class="w"> </span><span class="m">19</span>:33<span class="w"> </span>PlanetCute<span class="w"> </span>PNG.zip
drwxr-xr-x<span class="w">  </span><span class="m">2</span><span class="w"> </span>moose<span class="w"> </span>moose<span class="w">     </span><span class="m">4096</span><span class="w"> </span><span class="m">2012</span>-11-13<span class="w"> </span><span class="m">10</span>:49<span class="w"> </span>ProjectEuler
drwxr-xr-x<span class="w">  </span><span class="m">2</span><span class="w"> </span>moose<span class="w"> </span>moose<span class="w">     </span><span class="m">4096</span><span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">20</span>:28<span class="w"> </span>Screenshots<span class="w"> </span>Matlab
-rw-r--r--<span class="w">  </span><span class="m">1</span><span class="w"> </span>moose<span class="w"> </span>moose<span class="w">   </span><span class="m">764196</span><span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">20</span>:28<span class="w"> </span>Screenshots<span class="w"> </span>Matlab.zip
-rw-r--r--<span class="w">  </span><span class="m">1</span><span class="w"> </span>moose<span class="w"> </span>moose<span class="w">   </span><span class="m">534614</span><span class="w"> </span><span class="m">2013</span>-03-01<span class="w"> </span><span class="m">19</span>:48<span class="w"> </span>spritelib_gpl.zip
drwxr-xr-x<span class="w">  </span><span class="m">8</span><span class="w"> </span>moose<span class="w"> </span>moose<span class="w">     </span><span class="m">4096</span><span class="w"> </span><span class="m">2013</span>-02-27<span class="w"> </span><span class="m">18</span>:36<span class="w"> </span>Team
drwxr-xr-x<span class="w">  </span><span class="m">5</span><span class="w"> </span>moose<span class="w"> </span>moose<span class="w">     </span><span class="m">4096</span><span class="w"> </span><span class="m">2013</span>-02-27<span class="w"> </span><span class="m">19</span>:17<span class="w"> </span>ViMuDat
</code></pre></div>
<p>You might wonder what happens when you execute <code>chmod +x filename</code>. Does it set the execute-flag only for the user? Or for all three - user, group, others? Try and find out. You might want to remove all rights with <code>chmod 000 filename</code> before you start.</p>
<p>Did you know that you can search for file permissions with <code>find /home/ -perm 777</code>?</p>
<h2 id="suid-sgid-sticky-bit">SUID, SGID, Sticky Bit</h2>
<h3 id="files_1">Files</h3>
<p>Sometimes, you want to execute programs as root, although the user who started the execution isn't root. Take passwd, the program that allows users to change passwords, for example:</p>
<div class="highlight"><pre><span></span><code>moose@pc07:/usr/bin$<span class="w"> </span>ls<span class="w"> </span>-l<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>passwd$
-rwsr-xr-x<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w">   </span>root<span class="w">       </span><span class="m">53812</span><span class="w"> </span><span class="m">2011</span>-02-14<span class="w"> </span><span class="m">23</span>:11<span class="w"> </span>gpasswd
-rwxr-xr-x<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w">   </span>root<span class="w">       </span><span class="m">13612</span><span class="w"> </span><span class="m">2012</span>-11-06<span class="w"> </span><span class="m">21</span>:41<span class="w"> </span>htpasswd
-rwsr-xr-x<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w">   </span>lpadmin<span class="w">    </span><span class="m">13540</span><span class="w"> </span><span class="m">2012</span>-12-04<span class="w"> </span><span class="m">16</span>:24<span class="w"> </span>lppasswd
-rwsr-xr-x<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w">   </span>root<span class="w">       </span><span class="m">37140</span><span class="w"> </span><span class="m">2011</span>-02-14<span class="w"> </span><span class="m">23</span>:11<span class="w"> </span>passwd
-rwxr-xr-x<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w">   </span>root<span class="w">     </span><span class="m">5070304</span><span class="w"> </span><span class="m">2012</span>-04-24<span class="w"> </span><span class="m">23</span>:38<span class="w"> </span>smbpasswd
-rwxr-xr-x<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w">   </span>root<span class="w">        </span><span class="m">9688</span><span class="w"> </span><span class="m">2013</span>-01-18<span class="w"> </span><span class="m">17</span>:59<span class="w"> </span>vino-passwd
</code></pre></div>
<p>Instead of "x" in the user-execution-row, it states "s". That means, you can execute it and it has the SUID-bit set. If "x" wasn't set, the "S" would be in a capital letter. When you change your password, you need to edit <code>/etc/shadow</code>. This file has very limited access rights: <code>-rw-r-----</code> and is owned by "root" and group "shadow":</p>
<div class="highlight"><pre><span></span><code>moose@pc07:/etc$<span class="w"> </span>ls<span class="w"> </span>-l<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>shadow$
-rw-r-----<span class="w">  </span><span class="m">1</span><span class="w"> </span>root<span class="w">    </span>shadow<span class="w">     </span><span class="m">813</span><span class="w"> </span><span class="m">2013</span>-01-24<span class="w"> </span><span class="m">06</span>:21<span class="w"> </span>gshadow
-rw-r-----<span class="w">  </span><span class="m">1</span><span class="w"> </span>root<span class="w">    </span>shadow<span class="w">    </span><span class="m">1274</span><span class="w"> </span><span class="m">2013</span>-01-24<span class="w"> </span><span class="m">06</span>:21<span class="w"> </span>shadow
</code></pre></div>
<p>Here is <a href="http://www.cyberciti.biz/faq/understanding-etcshadow-file/">more about shadow file</a>.</p>
<p>The SGID (set group id) bit works similar to the SUID (set user id) bit. When you want to execute something with as the group of the file, you set the SGID bit.</p>
<p>The sticky bit seems to be used for programs to stick in memory after it was finished.</p>
<p>You can set the sticky bit like this:</p>
<div class="highlight"><pre><span></span><code>chmod<span class="w"> </span>+t<span class="w"> </span>testfile
</code></pre></div>
<p>or like that:</p>
<div class="highlight"><pre><span></span><code>chmod<span class="w"> </span><span class="m">1777</span><span class="w"> </span>testfile
</code></pre></div>
<h3 id="folders_1">Folders</h3>
<ul>
<li>suid: is ignored on UNIX and Linux systems</li>
<li>sgid: new files and subdirectories created within this folder inherit the folders group ID</li>
<li>t: when the sticky bit is set, only owners may change the filename or delete files</li>
</ul>
<h2 id="type_1">Type</h2>
<p>The first column of <code>ls -l</code> tells you the type of the item:</p>
<ul>
<li>-: a file</li>
<li>b: a block device</li>
<li>c: a character device</li>
<li>d: a directory</li>
<li>l: a symbolic link</li>
<li>p: pipe</li>
<li>s: a socket</li>
</ul>
<div class="highlight"><pre><span></span><code>moose@pc07:/dev$<span class="w"> </span>ls<span class="w"> </span>-l
total<span class="w"> </span><span class="m">0</span>
crw-------<span class="w">  </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>video<span class="w">    </span><span class="m">10</span>,<span class="w"> </span><span class="m">175</span><span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">10</span>:01<span class="w"> </span>agpgart
crw-rw----+<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>audio<span class="w">    </span><span class="m">14</span>,<span class="w">   </span><span class="m">4</span><span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">10</span>:01<span class="w"> </span>audio
drwxr-xr-x<span class="w">  </span><span class="m">2</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">         </span><span class="m">640</span><span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">12</span>:59<span class="w"> </span>block
drwxr-xr-x<span class="w">  </span><span class="m">2</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">         </span><span class="m">100</span><span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">12</span>:59<span class="w"> </span>bsg
drwxr-xr-x<span class="w">  </span><span class="m">3</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">          </span><span class="m">60</span><span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">10</span>:01<span class="w"> </span>bus
lrwxrwxrwx<span class="w">  </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">           </span><span class="m">3</span><span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">10</span>:01<span class="w"> </span>cdrom<span class="w"> </span>-&gt;<span class="w"> </span>sr0
lrwxrwxrwx<span class="w">  </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">           </span><span class="m">3</span><span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">10</span>:01<span class="w"> </span>cdrw<span class="w"> </span>-&gt;<span class="w"> </span>sr0
crw-rw----+<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>audio<span class="w">    </span><span class="m">14</span>,<span class="w">   </span><span class="m">3</span><span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">10</span>:01<span class="w"> </span>dsp
lrwxrwxrwx<span class="w">  </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">           </span><span class="m">3</span><span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">10</span>:01<span class="w"> </span>dvd<span class="w"> </span>-&gt;<span class="w"> </span>sr0
lrwxrwxrwx<span class="w">  </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">           </span><span class="m">3</span><span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">10</span>:01<span class="w"> </span>dvdrw<span class="w"> </span>-&gt;<span class="w"> </span>sr0
crw-rw----<span class="w">  </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">     </span><span class="m">10</span>,<span class="w">  </span><span class="m">61</span><span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">10</span>:01<span class="w"> </span>ecryptfs
crw-rw----<span class="w">  </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>video<span class="w">    </span><span class="m">29</span>,<span class="w">   </span><span class="m">0</span><span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">10</span>:01<span class="w"> </span>fb0
lrwxrwxrwx<span class="w">  </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">          </span><span class="m">13</span><span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">10</span>:01<span class="w"> </span>fd<span class="w"> </span>-&gt;<span class="w"> </span>/proc/...
crw-rw-rw-<span class="w">  </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">      </span><span class="m">1</span>,<span class="w">   </span><span class="m">7</span><span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">10</span>:01<span class="w"> </span>full
crw-rw-rw-<span class="w">  </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>fuse<span class="w">     </span><span class="m">10</span>,<span class="w"> </span><span class="m">229</span><span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">10</span>:01<span class="w"> </span>fuse
crw-rw----<span class="w">  </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">    </span><span class="m">251</span>,<span class="w">   </span><span class="m">0</span><span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">18</span>:14<span class="w"> </span>hidraw0
crw-rw----<span class="w">  </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">     </span><span class="m">10</span>,<span class="w"> </span><span class="m">228</span><span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">10</span>:01<span class="w"> </span>hpet
drwxr-xr-x<span class="w">  </span><span class="m">4</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">         </span><span class="m">380</span><span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">18</span>:14<span class="w"> </span>input
crw-rw----<span class="w">  </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">      </span><span class="m">1</span>,<span class="w">  </span><span class="m">11</span><span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">10</span>:01<span class="w"> </span>kmsg
srw-rw-rw-<span class="w">  </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">           </span><span class="m">0</span><span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">10</span>:01<span class="w"> </span>log
brw-rw----<span class="w">  </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>disk<span class="w">      </span><span class="m">7</span>,<span class="w">   </span><span class="m">0</span><span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">10</span>:01<span class="w"> </span>loop0
<span class="o">[</span>...<span class="o">]</span>
</code></pre></div>
<h2 id="stat">stat</h2>
<p>You can display quite a lot of information of a file with stat:</p>
<div class="highlight"><pre><span></span><code>moose@pc07:~/Desktop/Test$<span class="w"> </span>stat<span class="w"> </span>testfile
<span class="w">  </span>File:<span class="w"> </span><span class="sb">`</span>testfile<span class="err">'</span>
<span class="w">  </span>Size:<span class="w"> </span><span class="m">13</span><span class="w">          </span>Blocks:<span class="w"> </span><span class="m">8</span><span class="w">          </span>IO<span class="w"> </span>Block:<span class="w"> </span><span class="m">4096</span><span class="w">   </span>regular<span class="w"> </span>file
Device:<span class="w"> </span>801h/2049d<span class="w">  </span>Inode:<span class="w"> </span><span class="m">923339</span><span class="w">      </span>Links:<span class="w"> </span><span class="m">1</span>
Access:<span class="w"> </span><span class="o">(</span><span class="m">0777</span>/-rwxrwxrwx<span class="o">)</span><span class="w">  </span>Uid:<span class="w"> </span><span class="o">(</span><span class="w"> </span><span class="m">1000</span>/<span class="w">   </span>moose<span class="o">)</span><span class="w">   </span>Gid:<span class="w"> </span><span class="o">(</span><span class="w"> </span><span class="m">1000</span>/moose<span class="o">)</span>
Access:<span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">21</span>:31:52.154187243<span class="w"> </span>+0100
Modify:<span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">21</span>:31:51.154184098<span class="w"> </span>+0100
Change:<span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">21</span>:31:51.154184098<span class="w"> </span>+0100
</code></pre></div>
<p>The content of the file is "Hello World." (12 characters)</p>
<h2 id="attributes">Attributes</h2>
<p>According to the manpage of chattr:</p>
<blockquote>The `c', 's',  and `u' attributes are not honored by the ext2 and ext3 filesystems as implemented in the current mainline Linux kernels. These attributes may be implemented in future versions of the ext2 and ext3 filesystems.</blockquote>
<h3 id="version">Version</h3>
<p>I've just learned that you can give files version-attributes:</p>
<div class="highlight"><pre><span></span><code>moose@pc07:~/Desktop/Test$<span class="w"> </span>lsattr<span class="w"> </span>-v
<span class="w"> </span><span class="m">1338</span><span class="w"> </span>-----------------e-<span class="w"> </span>./testfile
</code></pre></div>
<p>You can set the version like this:</p>
<div class="highlight"><pre><span></span><code>chattr<span class="w"> </span>-v<span class="w"> </span><span class="m">1339</span><span class="w"> </span>testfile
</code></pre></div>
<h3 id="append-only">Append only</h3>
<p>This one is weird. Theoretically, it should allow me to append to a file, but not to change / delete anything in the file.</p>
<p>First of all, I had to use sudo to add this attribute:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>chattr<span class="w"> </span>+a<span class="w"> </span>testfile
</code></pre></div>
<p>Then, I had all permissions:</p>
<div class="highlight"><pre><span></span><code>moose@pc07:~/Desktop/Test$<span class="w"> </span>stat<span class="w"> </span>testfile
<span class="w">  </span>File:<span class="w"> </span><span class="sb">`</span>testfile<span class="err">'</span>
<span class="w">  </span>Size:<span class="w"> </span><span class="m">13</span><span class="w">          </span>Blocks:<span class="w"> </span><span class="m">8</span><span class="w">          </span>IO<span class="w"> </span>Block:<span class="w"> </span><span class="m">4096</span><span class="w">   </span>regular<span class="w"> </span>file
Device:<span class="w"> </span>801h/2049d<span class="w">  </span>Inode:<span class="w"> </span><span class="m">923339</span><span class="w">      </span>Links:<span class="w"> </span><span class="m">1</span>
Access:<span class="w"> </span><span class="o">(</span><span class="m">0777</span>/-rwxrwxrwx<span class="o">)</span><span class="w">  </span>Uid:<span class="w"> </span><span class="o">(</span><span class="w"> </span><span class="m">1000</span>/<span class="w">   </span>moose<span class="o">)</span><span class="w">   </span>Gid:<span class="w"> </span><span class="o">(</span><span class="w"> </span><span class="m">1000</span>/moose<span class="o">)</span>
Access:<span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">21</span>:31:52.154187243<span class="w"> </span>+0100
Modify:<span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">21</span>:31:51.154184098<span class="w"> </span>+0100
Change:<span class="w"> </span><span class="m">2013</span>-03-04<span class="w"> </span><span class="m">21</span>:33:55.154184312<span class="w"> </span>+0100
moose@pc07:~/Desktop/Test$<span class="w"> </span>lsattr
-----a-----------e-<span class="w"> </span>./testfile
</code></pre></div>
<p>But I couldn't append to the file with gedit. With bash, it worked fine:</p>
<div class="highlight"><pre><span></span><code>moose@pc07:~/Desktop/Test$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">"One more line "</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>testfile
moose@pc07:~/Desktop/Test$<span class="w"> </span>cat<span class="w"> </span>testfile
Hello<span class="w"> </span>World.
One<span class="w"> </span>more<span class="w"> </span>line
</code></pre></div>
<p>So I guess I found another bug in gEdit.</p>
<h3 id="immutable">Immutable</h3>
<p>You can mark a file as immutable with <code>sudo chattr +i testfile</code>. It's funny, you can't see that with <code>ls -l</code>, you have to use <code>lsattr</code>. I guess if you manage to get root privileges and want to troll somebody, you could set this bit. I think this might take quite a while until you recognize it.</p>
<h3 id="secure-deletion-and-undeletable">Secure deletion and undeletable</h3>
<p>When secure deletion is set with <code>chattr +s testfile</code> the operating system overwrites the file with random data when it is deleted.</p>
<p><code>chattr +u testfile</code> makes your file undeletable. This is strange. You can still delete the file with <code>rm</code>, but the system will not overwrite it. I've just <a href="http://unix.stackexchange.com/q/66870/4784">asked a question on SE</a>.</p>
<h3 id="synchronous-update">Synchronous update</h3>
<p>when you set <code>chattr +S testfile</code> the file gets directly written to the HDD and not buffered by the kernel cache.</p>
            
        </div>
        <section>
        <div class="col-sm-2 col-md-2" style="float:right;font-size:0.9em;">
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2013-03-04T22:29:42+01:00">Mär 4, 2013</time>
            <br/>
            by <a rel="author" class="vcard author post-author" itemprop="author" href="../author/martin-thoma/"><span class="fn" itemscope="" itemtype="https://schema.org/Person"><span itemprop="name">Martin Thoma</span></span></a>
            <h4>Category</h4>
            <a class="category-link" href="../categories.html#cyberculture-ref">Cyberculture</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="../tags.html#bug-ref">Bug
                    <span>4</span>
</a></li>
                <li><a href="../tags.html#gedit-ref">gedit
                    <span>2</span>
</a></li>
                <li><a href="../tags.html#it-security-ref">IT-Security
                    <span>12</span>
</a></li>
                <li><a href="../tags.html#linux-ref">Linux
                    <span>17</span>
</a></li>
            </ul>
<h4>Contact</h4>
    <a href="https://twitter.com/_martinthoma" title="My Twitter Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-twitter sidebar-social-links"></i></a>
    <a href="mailto:info@martin-thoma.de" title="My Email Address" class="sidebar-social-links" target="_blank">
    <i class="fa fa-envelope sidebar-social-links"></i></a>
    <a href="https://github.com/MartinThoma" title="My Github Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-github sidebar-social-links"></i></a>
    <a href="http://stackoverflow.com/users/562769/martin-thoma" title="My Stackoverflow Profile" class="sidebar-social-links" target="_blank">
    <i class="fa fa-stackoverflow sidebar-social-links"></i></a>
        </div>
        </section>
</div>
</article>
                </div>
                <div class="col-sm-1 col-md-1"></div>
            </div>
        </div>
        <div id="push"></div>
    </div>
<footer class="no-print">
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-subtitle"><span class="site-name">Martin Thoma</span> - A blog about Code, the Web and Cyberculture</li>
        <li><a href="https://martin-thoma.com/email-subscription">E-mail subscription</a></li>
        <li><a href="https://martin-thoma.com/feeds/index.xml">RSS-Feed</a></li>
        <li><a href="http://www.martin-thoma.de/privacy.htm">Privacy/Datenschutzerkl&auml;rung</a></li>
        <li><a href="http://www.martin-thoma.de/impressum.htm">Impressum</a></li>
        <li class="elegant-power">Powered by
            <a href="https://blog.getpelican.com/" title="Pelican Home Page" tabindex="-1">Pelican</a>.
            Theme: <a href="https://elegant.oncrashreboot.com" title="Theme Elegant Home Page" tabindex="-1">Elegant</a>
            by <a href="https://www.oncrashreboot.com/" title="Talha Mansoor Home Page" tabindex="-1">Talha Mansoor</a></li>
    </ul>
</div>
</footer>        <script src="//code.jquery.com/jquery.min.js"></script>
        <!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>
        <script>
(function(){
    'use strict';

    /*
    Create intra-page links
    Requires that your headings already have an `id` attribute set
    For every heading in your page, this adds a little anchor link `#` that you can click to get a permalink to the heading.
    Ignores `h1`, because you should only have one per page.
    The text content of the tag is used to generate the link, so it will fail "gracefully-ish" if you have duplicate heading text.

    Credit: https://gist.github.com/SimplGy/a229d25cdb19d7f21231
     */

    var headingNodes = [], results, link,
        tags = ['h2', 'h3', 'h4', 'h5', 'h6'];

    tags.forEach(function(tag){
        var contentTag = document.getElementById('contentAfterTitle');
      results = contentTag.getElementsByTagName(tag);
      Array.prototype.push.apply(headingNodes, results);
    });

    headingNodes.forEach(function(node){
      link = document.createElement('a');
      link.className = 'deepLink';
      link.textContent = ' ¶';
      link.href = '#' + node.getAttribute('id');
      node.appendChild(link);
    });

  })();
</script>
    </body>
    <!-- Theme: Elegant built for Pelican
    License : https://elegant.oncrashreboot.com -->
</html>